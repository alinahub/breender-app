{"ast":null,"code":"var _jsxFileName = \"/Users/alinaturbina/Uni Projects/seba/frontend/src/components/upload/documents.upload.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport 'antd/dist/antd.css';\nimport { Upload } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\nimport { sha256 } from 'js-sha256';\nimport { Button } from '@material-ui/core';\nimport { connect, useDispatch } from 'react-redux';\nimport { usePetCompetitions, usePetDocuments } from 'helper/hooks/pets.hooks';\nimport { useUser } from 'helper/hooks/auth.hooks';\nimport { updateCompetitionsToUpload, updateDocumentsToUpload } from 'redux/actions';\nimport { UPLOAD_STATUS } from 'helper/types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst prepareCompetitions = competitions => {\n  let arr = competitions;\n  arr.map((value, index) => {\n    value.key = index;\n    value.date = new Date(value.date);\n    return value;\n  });\n  return arr;\n};\n\nconst prepareDocuments = documents => {\n  let arr = documents;\n  arr.map((value, index) => {\n    value.key = index;\n    return value;\n  });\n  return arr;\n};\n\nconst prepareDocumentsFileList = (petDocuments, key) => {\n  const documents = prepareDocuments(petDocuments);\n  let petList = [];\n  documents.forEach((value, index) => {\n    if (value.key === key) {\n      if (value.document) {\n        petList.push({\n          uid: index,\n          name: value.name,\n          status: UPLOAD_STATUS.DONE,\n          url: value.url\n        });\n      }\n    }\n  });\n  return petList;\n};\n\nconst prepareCompetitionsFileList = (petCompetitions, key) => {\n  const competitions = prepareCompetitions(petCompetitions);\n  let petList = [];\n  competitions.forEach((value, index) => {\n    if (value.key === key) {\n      if (value.certificate) {\n        petList.push({\n          uid: index,\n          name: value.certificate.name,\n          status: UPLOAD_STATUS.DONE,\n          url: value.certificate.url\n        });\n      }\n    }\n  });\n  return petList;\n};\n/**\n *\n * @param  props\n * @returns Component to upload pet documents or certificates\n */\n\n\nconst DocumentsUpload = props => {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    mode\n  } = props;\n  const isCompetition = props.type === 'competitions';\n  let key = isCompetition ? props.competitionId : props.documentId; // get global states\n\n  const user = useUser();\n  const petDocuments = usePetDocuments();\n  const petCompetitions = usePetCompetitions();\n  const [fileList, setFileList] = useState(mode === 'add' ? [] : isCompetition ? prepareCompetitionsFileList(petCompetitions, key) : prepareDocumentsFileList(petDocuments, key));\n  const pathPrefix = `users/${user.id}/pets/documents`;\n  let maxFileNumber = props.maxFiles || 8; // update file list\n\n  const handleChange = ({\n    fileList\n  }) => setFileList(fileList); // upload image\n\n\n  const customUpload = async data => {\n    const docName = sha256(data.file.name); //a unique name for the image\n\n    /** Firebase storage structure\n     * -| users\n     *   -| userId\n     *     -| pets\n     *      -| documents\n     */\n\n    const imgPath = `${pathPrefix}/${docName}`;\n    var newData = {\n      name: data.file.name,\n      type: data.file.type,\n      path: imgPath,\n      url: undefined,\n      uploadDate: new Date(),\n      verified: false,\n      data: data,\n      status: UPLOAD_STATUS.UPLOAD\n    };\n\n    if (isCompetition) {\n      let competitionData = [...petCompetitions];\n      competitionData.map((item, index) => {\n        if (item.key === key) {\n          item.certificate = newData;\n          return item;\n        }\n\n        return item;\n      });\n      dispatch(updateCompetitionsToUpload(competitionData));\n    } else {\n      newData = {\n        name: data.file.name,\n        type: data.file.type,\n        path: imgPath,\n        url: undefined,\n        uploadDate: new Date(),\n        verified: false,\n        data: data,\n        status: UPLOAD_STATUS.UPLOAD\n      };\n      let documentData = [...petDocuments];\n      documentData.map((item, index) => {\n        if (item.key === key) {\n          item.document = newData;\n          return item;\n        }\n\n        return item;\n      });\n      console.log('UPLOAD', documentData, 'key', key);\n      dispatch(updateDocumentsToUpload(documentData));\n    }\n\n    data.onSuccess(null);\n  }; // remove document\n\n\n  const handleRemove = async file => {\n    // remove competition\n    if (isCompetition) {\n      let competitionData = [...petCompetitions];\n      competitionData.map((item, index) => {\n        if (item.key === key) {\n          item.certificate = undefined;\n          return item;\n        }\n\n        return item;\n      });\n      dispatch(updateCompetitionsToUpload(competitionData)); // remove document\n    } else {\n      let docData = [...petDocuments];\n      docData.map((item, index) => {\n        if (item.key === key) {\n          item.document = undefined;\n          return item;\n        }\n\n        return item;\n      });\n      dispatch(updateDocumentsToUpload(docData)); // if (file.url) {\n      //     // set status delete to remove it later onSave from firebase\n      //     docData.map((value) => (value.name === file.name ? (value.status = UPLOAD_STATUS.DELETE) : value));\n      //     dispatch(updateDocumentsToUpload(docData));\n      // } else {\n      //     let docObj = docData.filter((value) => value.name !== file.name);\n      //     dispatch(updateDocumentsToUpload(docObj));\n      // }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Upload, {\n      listType: \"text\",\n      fileList: fileList,\n      onChange: handleChange,\n      customRequest: customUpload,\n      onRemove: handleRemove,\n      children: fileList.length >= maxFileNumber ? null : /*#__PURE__*/_jsxDEV(Button, {\n        size: props.size || 'medium',\n        variant: \"contained\",\n        color: \"secondary\",\n        startIcon: /*#__PURE__*/_jsxDEV(UploadOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 108\n        }, this),\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DocumentsUpload, \"Q2FTNBk28ZiZiWOAEjk8M6hWKiE=\", false, function () {\n  return [useDispatch, useUser, usePetDocuments, usePetCompetitions];\n});\n\n_c = DocumentsUpload;\nexport default connect()(DocumentsUpload);\n\nvar _c;\n\n$RefreshReg$(_c, \"DocumentsUpload\");","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/components/upload/documents.upload.js"],"names":["React","useState","Upload","UploadOutlined","sha256","Button","connect","useDispatch","usePetCompetitions","usePetDocuments","useUser","updateCompetitionsToUpload","updateDocumentsToUpload","UPLOAD_STATUS","prepareCompetitions","competitions","arr","map","value","index","key","date","Date","prepareDocuments","documents","prepareDocumentsFileList","petDocuments","petList","forEach","document","push","uid","name","status","DONE","url","prepareCompetitionsFileList","petCompetitions","certificate","DocumentsUpload","props","dispatch","mode","isCompetition","type","competitionId","documentId","user","fileList","setFileList","pathPrefix","id","maxFileNumber","maxFiles","handleChange","customUpload","data","docName","file","imgPath","newData","path","undefined","uploadDate","verified","UPLOAD","competitionData","item","documentData","console","log","onSuccess","handleRemove","docData","length","size"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport 'antd/dist/antd.css';\nimport { Upload } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\nimport { sha256 } from 'js-sha256';\nimport { Button } from '@material-ui/core';\nimport { connect, useDispatch } from 'react-redux';\nimport { usePetCompetitions, usePetDocuments } from 'helper/hooks/pets.hooks';\nimport { useUser } from 'helper/hooks/auth.hooks';\nimport { updateCompetitionsToUpload, updateDocumentsToUpload } from 'redux/actions';\nimport { UPLOAD_STATUS } from 'helper/types';\n\nconst prepareCompetitions = (competitions) => {\n    let arr = competitions;\n    arr.map((value, index) => {\n        value.key = index;\n        value.date = new Date(value.date);\n        return value;\n    });\n    return arr;\n};\n\nconst prepareDocuments = (documents) => {\n    let arr = documents;\n    arr.map((value, index) => {\n        value.key = index;\n        return value;\n    });\n    return arr;\n};\n\nconst prepareDocumentsFileList = (petDocuments, key) => {\n    const documents = prepareDocuments(petDocuments);\n    let petList = [];\n    documents.forEach((value, index) => {\n        if (value.key === key) {\n            if (value.document) {\n                petList.push({\n                    uid: index,\n                    name: value.name,\n                    status: UPLOAD_STATUS.DONE,\n                    url: value.url,\n                });\n            }\n        }\n    });\n    return petList;\n};\n\nconst prepareCompetitionsFileList = (petCompetitions, key) => {\n    const competitions = prepareCompetitions(petCompetitions);\n    let petList = [];\n    competitions.forEach((value, index) => {\n        if (value.key === key) {\n            if (value.certificate) {\n                petList.push({\n                    uid: index,\n                    name: value.certificate.name,\n                    status: UPLOAD_STATUS.DONE,\n                    url: value.certificate.url,\n                });\n            }\n        }\n    });\n    return petList;\n};\n\n/**\n *\n * @param  props\n * @returns Component to upload pet documents or certificates\n */\n\nconst DocumentsUpload = (props) => {\n    const dispatch = useDispatch();\n    const { mode } = props;\n    const isCompetition = props.type === 'competitions';\n    let key = isCompetition ? props.competitionId : props.documentId;\n\n    // get global states\n    const user = useUser();\n    const petDocuments = usePetDocuments();\n    const petCompetitions = usePetCompetitions();\n\n    const [fileList, setFileList] = useState(mode === 'add' ? [] : isCompetition ? prepareCompetitionsFileList(petCompetitions, key) : prepareDocumentsFileList(petDocuments, key));\n\n    const pathPrefix = `users/${user.id}/pets/documents`;\n    let maxFileNumber = props.maxFiles || 8;\n\n    // update file list\n    const handleChange = ({ fileList }) => setFileList(fileList);\n\n    // upload image\n    const customUpload = async (data) => {\n        const docName = sha256(data.file.name); //a unique name for the image\n\n        /** Firebase storage structure\n         * -| users\n         *   -| userId\n         *     -| pets\n         *      -| documents\n         */\n        const imgPath = `${pathPrefix}/${docName}`;\n\n        var newData = {\n            name: data.file.name,\n            type: data.file.type,\n            path: imgPath,\n            url: undefined,\n            uploadDate: new Date(),\n            verified: false,\n            data: data,\n            status: UPLOAD_STATUS.UPLOAD,\n        };\n\n        if (isCompetition) {\n            let competitionData = [...petCompetitions];\n            competitionData.map((item, index) => {\n                if (item.key === key) {\n                    item.certificate = newData;\n                    return item;\n                }\n                return item;\n            });\n            dispatch(updateCompetitionsToUpload(competitionData));\n        } else {\n            newData = {\n                name: data.file.name,\n                type: data.file.type,\n                path: imgPath,\n                url: undefined,\n                uploadDate: new Date(),\n                verified: false,\n                data: data,\n                status: UPLOAD_STATUS.UPLOAD,\n            };\n\n            let documentData = [...petDocuments];\n            documentData.map((item, index) => {\n                if (item.key === key) {\n                    item.document = newData;\n                    return item;\n                }\n                return item;\n            });\n            console.log('UPLOAD', documentData, 'key', key);\n            dispatch(updateDocumentsToUpload(documentData));\n        }\n\n        data.onSuccess(null);\n    };\n\n    // remove document\n    const handleRemove = async (file) => {\n        // remove competition\n        if (isCompetition) {\n            let competitionData = [...petCompetitions];\n            competitionData.map((item, index) => {\n                if (item.key === key) {\n                    item.certificate = undefined;\n                    return item;\n                }\n                return item;\n            });\n\n            dispatch(updateCompetitionsToUpload(competitionData));\n            // remove document\n        } else {\n            let docData = [...petDocuments];\n            docData.map((item, index) => {\n                if (item.key === key) {\n                    item.document = undefined;\n                    return item;\n                }\n                return item;\n            });\n\n            dispatch(updateDocumentsToUpload(docData));\n            // if (file.url) {\n            //     // set status delete to remove it later onSave from firebase\n            //     docData.map((value) => (value.name === file.name ? (value.status = UPLOAD_STATUS.DELETE) : value));\n            //     dispatch(updateDocumentsToUpload(docData));\n            // } else {\n            //     let docObj = docData.filter((value) => value.name !== file.name);\n            //     dispatch(updateDocumentsToUpload(docObj));\n            // }\n        }\n    };\n\n    return (\n        <div>\n            <Upload listType=\"text\" fileList={fileList} onChange={handleChange} customRequest={customUpload} onRemove={handleRemove}>\n                {fileList.length >= maxFileNumber ? null : (\n                    <Button size={props.size || 'medium'} variant=\"contained\" color=\"secondary\" startIcon={<UploadOutlined />}>\n                        Upload\n                    </Button>\n                )}\n            </Upload>\n        </div>\n    );\n};\n\nexport default connect()(DocumentsUpload);\n"]},"metadata":{},"sourceType":"module"}
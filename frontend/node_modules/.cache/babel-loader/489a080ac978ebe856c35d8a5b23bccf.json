{"ast":null,"code":"var _jsxFileName = \"/Users/alinaturbina/Uni Projects/seba/frontend/src/views/SearchView.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { connect, useSelector } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { withRouter } from 'react-router-dom';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { getPets } from '../redux/actions/petActions';\nimport SearchResults from '../components/search/SearchResults';\nimport { breeds } from 'helper/data/breeds';\nimport { useLoggedInUser } from 'helper/hooks/auth.hooks';\nimport PremiumBanner from 'components/PremiumBanner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  filters: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'baseline'\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  },\n  button: {\n    margin: theme.spacing(3)\n  },\n  ageSlider: {\n    margin: theme.spacing(4),\n    width: 200\n  }\n}));\n\nfunction SearchView(props) {\n  _s();\n\n  var _breeds$chosenSpecies;\n\n  const searchRef = useRef();\n  const classes = useStyles(); // get pets from redux store\n\n  var pets = useSelector(state => state.entities.pets);\n  const loggedInUser = useLoggedInUser();\n  var totalPages = useSelector(state => state.entities.totalPages);\n  const [chosenSpecies, setSpecies] = React.useState('');\n  const [order, setOrder] = React.useState('descending');\n  const [sex, setSex] = React.useState('');\n  const [breed, setBreed] = React.useState('');\n  const [ageRange, setAgeRange] = React.useState([1, 5]);\n  const sexes = ['female', 'male'];\n  const orders = ['ascending price', 'descending price', 'newest'];\n  const ageMarks = [{\n    value: 1,\n    label: '1 year'\n  }, {\n    value: 5,\n    label: '5 years'\n  }, {\n    value: 10,\n    label: '10 years'\n  }];\n\n  const loadPets = async pageValue => {\n    // trigger the redux action getPets\n    pets = props.dispatch(getPets(chosenSpecies, sex, breed, ageRange, pageValue));\n  };\n\n  useEffect(() => {\n    // load pets when the page is loaded or the pets were filtered.\n    if (!pets) {\n      loadPets(1);\n    }\n  }, [pets]);\n\n  const updateFilters = async () => {\n    setSpecies('');\n    setSex('');\n    setBreed('');\n    setAgeRange([1, 10]);\n    pets = props.dispatch(getPets('', '', '', [1, 5], 1)); //change parameters manually because values remain constant inside render and are not updated immediately\n  };\n\n  const resetFilters = async () => {\n    updateFilters();\n  };\n\n  const handleSpeciesChange = event => {\n    setSpecies(event.target.value);\n  };\n\n  const handleSexChange = event => {\n    setSex(event.target.value);\n  };\n\n  const handleBreedChange = event => {\n    setBreed(event.target.value);\n  };\n\n  const handleAgeRangeChange = (event, newRange) => {\n    setAgeRange(newRange);\n  };\n\n  const handleOrderChange = event => {\n    setOrder(event.target.value);\n  };\n\n  function agetext(age) {\n    return `${age} years old`;\n  }\n\n  const handleChange = async (event, value) => {\n    var _searchRef$current;\n\n    loadPets(value - 1);\n    (_searchRef$current = searchRef.current) === null || _searchRef$current === void 0 ? void 0 : _searchRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!loggedInUser || loggedInUser.subscriptionPlan === 'free' ? /*#__PURE__*/_jsxDEV(PremiumBanner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 74\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.filters,\n      ref: searchRef,\n      children: [/*#__PURE__*/_jsxDEV(FormControl, {\n        className: classes.formControl,\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          id: \"species-select-label\",\n          children: \"Species\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          labelId: \"species-select-label\",\n          id: \"species-select\",\n          value: chosenSpecies,\n          onChange: handleSpeciesChange,\n          children: Object.keys(breeds).map(oneSpecies => /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: oneSpecies,\n            children: oneSpecies\n          }, oneSpecies, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        className: classes.formControl,\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          id: \"sex-select-label\",\n          children: \"Sex\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          labelId: \"sex-select-label\",\n          id: \"sex-select\",\n          value: sex,\n          onChange: handleSexChange,\n          children: sexes.map(sex => /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: sex,\n            children: sex\n          }, sex, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        className: classes.formControl,\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          id: \"breed-select-label\",\n          children: \"Breed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          labelId: \"breed-select-label\",\n          id: \"breed-select\",\n          value: breed,\n          onChange: handleBreedChange,\n          children: ((_breeds$chosenSpecies = breeds[chosenSpecies]) !== null && _breeds$chosenSpecies !== void 0 ? _breeds$chosenSpecies : []).map(breed => /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: breed,\n            children: breed\n          }, breed, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        className: classes.formControl,\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          id: \"breed-select-label\",\n          children: \"Sort by\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          labelId: \"breed-select-label\",\n          id: \"sort-select\",\n          value: order,\n          onChange: handleOrderChange,\n          children: orders.map(order => /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: order,\n            children: order\n          }, order, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.ageSlider,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          children: \"Age Range\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Slider, {\n          value: ageRange,\n          onChange: handleAgeRangeChange,\n          valueLabelDisplay: \"auto\",\n          \"aria-labelledby\": \"range-slider\",\n          getAriaValueText: agetext,\n          min: 0.5,\n          max: 10,\n          marks: ageMarks,\n          color: \"secondary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: classes.button,\n        variant: \"contained\",\n        color: \"secondary\",\n        onClick: loadPets,\n        children: \"Apply\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: classes.button,\n        variant: \"contained\",\n        color: \"secondary\",\n        onClick: resetFilters,\n        children: \"Reset filters\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SearchResults, {\n      pets: pets,\n      order: order\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      my: 2,\n      display: \"flex\",\n      justifyContent: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Pagination, {\n        count: totalPages,\n        variant: \"outlined\",\n        shape: \"rounded\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SearchView, \"LVH88JOfnREBG8WN0X2rggfN32g=\", false, function () {\n  return [useStyles, useSelector, useLoggedInUser, useSelector];\n});\n\n_c = SearchView;\nexport default connect()(withRouter(SearchView));\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchView\");","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/views/SearchView.js"],"names":["React","useEffect","useState","useRef","connect","useSelector","makeStyles","withRouter","FormControl","Select","InputLabel","MenuItem","Typography","Slider","Button","Box","Pagination","getPets","SearchResults","breeds","useLoggedInUser","PremiumBanner","useStyles","theme","filters","display","flexDirection","alignItems","formControl","margin","spacing","minWidth","button","ageSlider","width","SearchView","props","searchRef","classes","pets","state","entities","loggedInUser","totalPages","chosenSpecies","setSpecies","order","setOrder","sex","setSex","breed","setBreed","ageRange","setAgeRange","sexes","orders","ageMarks","value","label","loadPets","pageValue","dispatch","updateFilters","resetFilters","handleSpeciesChange","event","target","handleSexChange","handleBreedChange","handleAgeRangeChange","newRange","handleOrderChange","agetext","age","handleChange","current","scrollIntoView","behavior","subscriptionPlan","Object","keys","map","oneSpecies"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { connect, useSelector } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { withRouter } from 'react-router-dom';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { getPets } from '../redux/actions/petActions';\nimport SearchResults from '../components/search/SearchResults';\nimport { breeds } from 'helper/data/breeds';\nimport { useLoggedInUser } from 'helper/hooks/auth.hooks';\nimport PremiumBanner from 'components/PremiumBanner';\n\nconst useStyles = makeStyles((theme) => ({\n    filters: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'baseline',\n    },\n    formControl: {\n        margin: theme.spacing(1),\n        minWidth: 120,\n    },\n    button: {\n        margin: theme.spacing(3),\n    },\n    ageSlider: {\n        margin: theme.spacing(4),\n        width: 200,\n    },\n}));\n\nfunction SearchView(props) {\n    const searchRef = useRef();\n    const classes = useStyles();\n    // get pets from redux store\n    var pets = useSelector((state) => state.entities.pets);\n    const loggedInUser = useLoggedInUser();\n    var totalPages = useSelector((state) => state.entities.totalPages);\n\n    const [chosenSpecies, setSpecies] = React.useState('');\n    const [order, setOrder] = React.useState('descending');\n    const [sex, setSex] = React.useState('');\n    const [breed, setBreed] = React.useState('');\n    const [ageRange, setAgeRange] = React.useState([1, 5]);\n\n    const sexes = ['female', 'male'];\n    const orders = ['ascending price', 'descending price', 'newest'];\n\n    const ageMarks = [\n        {\n            value: 1,\n            label: '1 year',\n        },\n        {\n            value: 5,\n            label: '5 years',\n        },\n        {\n            value: 10,\n            label: '10 years',\n        },\n    ];\n\n    const loadPets = async (pageValue) => {\n        // trigger the redux action getPets\n        pets = props.dispatch(getPets(chosenSpecies, sex, breed, ageRange, pageValue));\n    };\n\n    useEffect(() => {\n        // load pets when the page is loaded or the pets were filtered.\n        if (!pets) {\n            loadPets(1);\n        }\n    }, [pets]);\n\n    const updateFilters = async () => {\n        setSpecies('');\n        setSex('');\n        setBreed('');\n        setAgeRange([1, 10]);\n        pets = props.dispatch(getPets('', '', '', [1, 5], 1)); //change parameters manually because values remain constant inside render and are not updated immediately\n    };\n\n    const resetFilters = async () => {\n        updateFilters();\n    };\n\n    const handleSpeciesChange = (event) => {\n        setSpecies(event.target.value);\n    };\n\n    const handleSexChange = (event) => {\n        setSex(event.target.value);\n    };\n\n    const handleBreedChange = (event) => {\n        setBreed(event.target.value);\n    };\n\n    const handleAgeRangeChange = (event, newRange) => {\n        setAgeRange(newRange);\n    };\n\n    const handleOrderChange = (event) => {\n        setOrder(event.target.value);\n    };\n\n    function agetext(age) {\n        return `${age} years old`;\n    }\n\n    const handleChange = async (event, value) => {\n        loadPets(value - 1);\n        searchRef.current?.scrollIntoView({ behavior: 'smooth' });\n    };\n\n    return (\n        <div>\n            {!loggedInUser || loggedInUser.subscriptionPlan === 'free' ? <PremiumBanner /> : null}\n            <div className={classes.filters} ref={searchRef}>\n                <FormControl className={classes.formControl}>\n                    <InputLabel id=\"species-select-label\">Species</InputLabel>\n                    <Select labelId=\"species-select-label\" id=\"species-select\" value={chosenSpecies} onChange={handleSpeciesChange}>\n                        {Object.keys(breeds).map((oneSpecies) => (\n                            <MenuItem key={oneSpecies} value={oneSpecies}>\n                                {oneSpecies}\n                            </MenuItem>\n                        ))}\n                    </Select>\n                </FormControl>\n\n                <FormControl className={classes.formControl}>\n                    <InputLabel id=\"sex-select-label\">Sex</InputLabel>\n                    <Select labelId=\"sex-select-label\" id=\"sex-select\" value={sex} onChange={handleSexChange}>\n                        {sexes.map((sex) => (\n                            <MenuItem key={sex} value={sex}>\n                                {sex}\n                            </MenuItem>\n                        ))}\n                    </Select>\n                </FormControl>\n\n                <FormControl className={classes.formControl}>\n                    <InputLabel id=\"breed-select-label\">Breed</InputLabel>\n                    <Select labelId=\"breed-select-label\" id=\"breed-select\" value={breed} onChange={handleBreedChange}>\n                        {(breeds[chosenSpecies] ?? []).map((breed) => (\n                            <MenuItem key={breed} value={breed}>\n                                {breed}\n                            </MenuItem>\n                        ))}\n                    </Select>\n                </FormControl>\n                <FormControl className={classes.formControl}>\n                    <InputLabel id=\"breed-select-label\">Sort by</InputLabel>\n                    <Select labelId=\"breed-select-label\" id=\"sort-select\" value={order} onChange={handleOrderChange}>\n                        {orders.map((order) => (\n                            <MenuItem key={order} value={order}>\n                                {order}\n                            </MenuItem>\n                        ))}\n                    </Select>\n                </FormControl>\n\n                <div className={classes.ageSlider}>\n                    <Typography>Age Range</Typography>\n                    <Slider\n                        value={ageRange}\n                        onChange={handleAgeRangeChange}\n                        valueLabelDisplay=\"auto\"\n                        aria-labelledby=\"range-slider\"\n                        getAriaValueText={agetext}\n                        min={0.5}\n                        max={10}\n                        marks={ageMarks}\n                        color=\"secondary\"\n                    />\n                </div>\n\n                <Button className={classes.button} variant=\"contained\" color=\"secondary\" onClick={loadPets}>\n                    Apply\n                </Button>\n                <Button className={classes.button} variant=\"contained\" color=\"secondary\" onClick={resetFilters}>\n                    Reset filters\n                </Button>\n            </div>\n            <SearchResults pets={pets} order={order} />\n\n            <Box my={2} display=\"flex\" justifyContent=\"center\">\n                <Pagination count={totalPages} variant=\"outlined\" shape=\"rounded\" onChange={handleChange} />\n            </Box>\n        </div>\n    );\n}\n\nexport default connect()(withRouter(SearchView));\n"]},"metadata":{},"sourceType":"module"}
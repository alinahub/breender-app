{"ast":null,"code":"const getUser = () => {\n  if (window.localStorage['jwtToken']) {\n    let token = window.localStorage['jwtToken'];\n    let base64Url = token.split('.')[1];\n    let base64 = base64Url.replace('-', '+').replace('_', '/');\n    let userJson = JSON.parse(window.atob(base64)); // if token is expired delete it and return {}\n    // --> User is not logged in anymore.\n\n    if (userJson.exp > Date.now()) {\n      window.localStorage.removeItem('jwtToken');\n      return {};\n    }\n\n    return {\n      user: {\n        id: userJson._id,\n        username: userJson.username,\n        role: userJson.role\n      }\n    };\n  }\n\n  return {};\n};\n\nexport default function user(state = getUser(), action) {\n  switch (action.type) {\n    case 'LOGIN_SUCCESS':\n      return { ...state,\n        user: action.user\n      };\n\n    case 'LOGIN_FAILURE':\n      return {\n        error: action.error\n      };\n\n    case 'LOGIN_RESET':\n      return {};\n\n    case 'LOGOUT':\n      return {};\n\n    case 'GET_LOGGEDINUSER':\n      return { ...state,\n        loggedInUser: action.loggedInUser\n      };\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/redux/reducers/userReducer.js"],"names":["getUser","window","localStorage","token","base64Url","split","base64","replace","userJson","JSON","parse","atob","exp","Date","now","removeItem","user","id","_id","username","role","state","action","type","error","loggedInUser"],"mappings":"AAAA,MAAMA,OAAO,GAAG,MAAM;AAClB,MAAIC,MAAM,CAACC,YAAP,CAAoB,UAApB,CAAJ,EAAqC;AACjC,QAAIC,KAAK,GAAGF,MAAM,CAACC,YAAP,CAAoB,UAApB,CAAZ;AACA,QAAIE,SAAS,GAAGD,KAAK,CAACE,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAhB;AACA,QAAIC,MAAM,GAAGF,SAAS,CAACG,OAAV,CAAkB,GAAlB,EAAuB,GAAvB,EAA4BA,OAA5B,CAAoC,GAApC,EAAyC,GAAzC,CAAb;AACA,QAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWT,MAAM,CAACU,IAAP,CAAYL,MAAZ,CAAX,CAAf,CAJiC,CAKjC;AACA;;AACA,QAAIE,QAAQ,CAACI,GAAT,GAAeC,IAAI,CAACC,GAAL,EAAnB,EAA+B;AAC3Bb,MAAAA,MAAM,CAACC,YAAP,CAAoBa,UAApB,CAA+B,UAA/B;AACA,aAAO,EAAP;AACH;;AACD,WAAO;AACHC,MAAAA,IAAI,EAAE;AACFC,QAAAA,EAAE,EAAET,QAAQ,CAACU,GADX;AAEFC,QAAAA,QAAQ,EAAEX,QAAQ,CAACW,QAFjB;AAGFC,QAAAA,IAAI,EAAEZ,QAAQ,CAACY;AAHb;AADH,KAAP;AAOH;;AACD,SAAO,EAAP;AACH,CArBD;;AAuBA,eAAe,SAASJ,IAAT,CAAcK,KAAK,GAAGrB,OAAO,EAA7B,EAAiCsB,MAAjC,EAAyC;AACpD,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,eAAL;AACI,aAAO,EAAC,GAAGF,KAAJ;AAAWL,QAAAA,IAAI,EAAEM,MAAM,CAACN;AAAxB,OAAP;;AACJ,SAAK,eAAL;AACI,aAAO;AAAEQ,QAAAA,KAAK,EAAEF,MAAM,CAACE;AAAhB,OAAP;;AACJ,SAAK,aAAL;AACI,aAAO,EAAP;;AACJ,SAAK,QAAL;AACI,aAAO,EAAP;;AACJ,SAAK,kBAAL;AACI,aAAO,EAAE,GAAGH,KAAL;AAAYI,QAAAA,YAAY,EAAEH,MAAM,CAACG;AAAjC,OAAP;;AACJ;AACI,aAAOJ,KAAP;AAZR;AAcH","sourcesContent":["const getUser = () => {\n    if (window.localStorage['jwtToken']) {\n        let token = window.localStorage['jwtToken'];\n        let base64Url = token.split('.')[1];\n        let base64 = base64Url.replace('-', '+').replace('_', '/');\n        let userJson = JSON.parse(window.atob(base64));\n        // if token is expired delete it and return {}\n        // --> User is not logged in anymore.\n        if (userJson.exp > Date.now()) {\n            window.localStorage.removeItem('jwtToken');\n            return {};\n        }\n        return {\n            user: {\n                id: userJson._id,\n                username: userJson.username,\n                role: userJson.role,\n            },\n        };\n    }\n    return {};\n};\n\nexport default function user(state = getUser(), action) {\n    switch (action.type) {\n        case 'LOGIN_SUCCESS':\n            return {...state, user: action.user };\n        case 'LOGIN_FAILURE':\n            return { error: action.error };\n        case 'LOGIN_RESET':\n            return {};\n        case 'LOGOUT':\n            return {};\n        case 'GET_LOGGEDINUSER':\n            return { ...state, loggedInUser: action.loggedInUser };\n        default:\n            return state;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}
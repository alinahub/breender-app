{"ast":null,"code":"import _slicedToArray from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import{makeStyles}from'@material-ui/core/styles';import{InputLabel,MenuItem,Select,Grid,Paper,Button,TextField,Typography,FormControlLabel,Checkbox,FormControl}from'@material-ui/core';import{checkUser}from'../redux/actions';import{connect,useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{usersignUpRoot:{margin:'auto'},signUpPaper:{width:500,padding:theme.spacing(4)},signUpRow:{paddingTop:theme.spacing(1),paddingBottom:theme.spacing(1),'&:last-child':{paddingBottom:theme.spacing(0)},'&:first-child':{paddingTop:theme.spacing(0)}},signUpButtons:{display:'flex',justifyContent:'flex-end'},signUpButton:{marginLeft:theme.spacing(1)}};});var provincesAndCities={bavaria:['Munich','Nuremberg','Augsburg','Regensburg','Ingolstadt','Würzburg','Other'],'lower-saxony':['Hanover','Braunschweig','Oldenburg','Osnabrück','Wolfsburg','Göttingen','Other'],'baden-wuerttemberg':['Stuttgart','Karlsruhe','Mannheim','Freiburg im Breisgau','Heidelberg','Ulm','Other'],'north-rhine-westphalia':['Cologne','Düsseldorf','Dortmund','Essen','Duisburg','Bochum','Other']};/**\n * For register new users\n * @param {props} props\n */function SignUpComponent(props){var classes=useStyles();var values=props.values;var errors=props.errors;var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),passwordError=_React$useState2[0],setPasswordError=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),next=_React$useState4[0],setNext=_React$useState4[1];//set to false when there are errors and disable next step\nvar isValid=useSelector(function(state){return state.checkUser;});//set to false when component is rendered for the first time in order to skip error message from previous registration\nvar _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),rendered=_React$useState6[0],setRendered=_React$useState6[1];var saveAndContinue=function saveAndContinue(e){e.preventDefault();checkIfUserIsValid();};function checkIfUserIsValid(){props.dispatch(checkUser(values.email,values.username,values.isAdmin));setRendered(true);setNext(true);}useEffect(function(){if(isValid.error){if(rendered){if(isValid.error.type==='username'){props.handleChange('usernameError',isValid.error.message);}else{props.handleChange('emailError',isValid.error.message);}}}else{if(next){props.nextStep();}}},[isValid]);var options=null;if(values.province){options=provincesAndCities[values.province].map(function(elem){return/*#__PURE__*/_jsx(MenuItem,{value:elem,children:elem},elem);});}var onBlurPassword=function onBlurPassword(e){if(values.password!==''&&values.password2!==''){if(values.password!==values.password2){setPasswordError('Passwords do not match.');}else{setPasswordError('');}}};return/*#__PURE__*/_jsx(\"div\",{className:classes.usersignUpRoot,children:/*#__PURE__*/_jsxs(Paper,{className:classes.signUpPaper,component:\"form\",children:[/*#__PURE__*/_jsx(\"div\",{className:classes.signUpRow,children:/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",children:\"Welcome to the Breender App!\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.signUpRow,children:/*#__PURE__*/_jsx(TextField,{label:\"Email\",variant:\"outlined\",size:\"small\",fullWidth:true,value:values.email,onChange:function onChange(e){return props.handleChange('email',e);},error:errors.emailError!=='',helperText:errors.emailError!==''?errors.emailError:null,type:\"email\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.signUpRow,children:/*#__PURE__*/_jsx(TextField,{label:\"Username\",variant:\"outlined\",size:\"small\",fullWidth:true,value:values.username,onChange:function onChange(e){return props.handleChange('username',e);},error:errors.usernameError!=='',helperText:errors.usernameError!==''?errors.usernameError:null})}),/*#__PURE__*/_jsx(\"div\",{className:classes.signUpRow,children:/*#__PURE__*/_jsx(TextField,{label:\"Password\",fullWidth:true,variant:\"outlined\",size:\"small\",value:values.password,onChange:function onChange(e){return props.handleChange('password',e);},error:passwordError!=='',type:\"password\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.signUpRow,children:/*#__PURE__*/_jsx(TextField,{label:\"Repeat Password\",variant:\"outlined\",size:\"small\",fullWidth:true,value:values.password2,onChange:function onChange(e){return props.handleChange('password2',e);},error:passwordError!=='',onBlur:onBlurPassword,type:\"password\"})}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,style:{paddingTop:20},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsxs(FormControl,{required:true,variant:\"outlined\",size:\"small\",fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"State/Province\"}),/*#__PURE__*/_jsxs(Select,{label:\"State/Province\",value:values.province,onChange:function onChange(e){return props.handleChange('province',e);},children:[/*#__PURE__*/_jsx(MenuItem,{value:'bavaria',children:\"Bavaria\"}),/*#__PURE__*/_jsx(MenuItem,{value:'lower-saxony',children:\"Lower Saxony\"}),/*#__PURE__*/_jsx(MenuItem,{value:'baden-wuerttemberg',children:\"Baden-W\\xFCrttemberg\"}),/*#__PURE__*/_jsx(MenuItem,{value:'north-rhine-westphalia',children:\"North Rhine-Westphalia\"})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsxs(FormControl,{required:true,variant:\"outlined\",size:\"small\",fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"City\"}),/*#__PURE__*/_jsx(Select,{label:\"City\",value:values.city,onChange:function onChange(e){return props.handleChange('city',e);},children:options})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.signUpRow,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:values.isAdmin,onChange:function onChange(e){return props.handleChange('isAdmin',e);},style:{color:\"#D37F65\"}}),label:\"Is Admin\"})}),passwordError!==''?/*#__PURE__*/_jsx(\"div\",{className:classes.signUpRow,children:/*#__PURE__*/_jsx(Typography,{color:\"error\",children:passwordError})}):null,/*#__PURE__*/_jsxs(\"div\",{className:classes.signUpRow+' '+classes.signUpButtons,children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",className:classes.signUpButton,onClick:props.onCancel,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:classes.signUpButton,variant:\"contained\",color:\"primary\",disabled:values.email===''||errors.emailError!==''||values.username===''||errors.usernameError!==''||values.password===''||values.password2===''||values.password!==values.password2||values.province===''||values.city===''||passwordError!=='',onClick:saveAndContinue,children:\"Next\"})]})]})});}export default connect()(SignUpComponent);","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/components/SignUpComponent.js"],"names":["React","useEffect","makeStyles","InputLabel","MenuItem","Select","Grid","Paper","Button","TextField","Typography","FormControlLabel","Checkbox","FormControl","checkUser","connect","useSelector","useStyles","theme","usersignUpRoot","margin","signUpPaper","width","padding","spacing","signUpRow","paddingTop","paddingBottom","signUpButtons","display","justifyContent","signUpButton","marginLeft","provincesAndCities","bavaria","SignUpComponent","props","classes","values","errors","useState","passwordError","setPasswordError","next","setNext","isValid","state","rendered","setRendered","saveAndContinue","e","preventDefault","checkIfUserIsValid","dispatch","email","username","isAdmin","error","type","handleChange","message","nextStep","options","province","map","elem","onBlurPassword","password","password2","emailError","usernameError","city","color","onCancel"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { InputLabel, MenuItem, Select, Grid, Paper, Button, TextField, Typography, FormControlLabel, Checkbox, FormControl } from '@material-ui/core';\nimport { checkUser } from '../redux/actions';\nimport { connect, useSelector } from 'react-redux';\n\nconst useStyles = makeStyles((theme) => ({\n    usersignUpRoot: {\n        margin: 'auto',\n    },\n    signUpPaper: {\n        width: 500,\n        padding: theme.spacing(4),\n    },\n    signUpRow: {\n        paddingTop: theme.spacing(1),\n        paddingBottom: theme.spacing(1),\n        '&:last-child': {\n            paddingBottom: theme.spacing(0),\n        },\n        '&:first-child': {\n            paddingTop: theme.spacing(0),\n        },\n    },\n    signUpButtons: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n    },\n    signUpButton: {\n        marginLeft: theme.spacing(1),\n    },\n}));\n\nconst provincesAndCities = {\n    bavaria: ['Munich', 'Nuremberg', 'Augsburg', 'Regensburg', 'Ingolstadt', 'Würzburg', 'Other'],\n    'lower-saxony': ['Hanover', 'Braunschweig', 'Oldenburg', 'Osnabrück', 'Wolfsburg', 'Göttingen', 'Other'],\n    'baden-wuerttemberg': ['Stuttgart', 'Karlsruhe', 'Mannheim', 'Freiburg im Breisgau', 'Heidelberg', 'Ulm', 'Other'],\n    'north-rhine-westphalia': ['Cologne', 'Düsseldorf', 'Dortmund', 'Essen', 'Duisburg', 'Bochum', 'Other'],\n};\n\n/**\n * For register new users\n * @param {props} props\n */\nfunction SignUpComponent(props) {\n    const classes = useStyles();\n    const values = props.values;\n    const errors = props.errors;\n    const [passwordError, setPasswordError] = React.useState('');\n    const [next, setNext] = React.useState(false); //set to false when there are errors and disable next step\n    const isValid = useSelector((state) => state.checkUser);\n    //set to false when component is rendered for the first time in order to skip error message from previous registration\n    const [rendered, setRendered] = React.useState(false);\n\n    const saveAndContinue = (e) => {\n        e.preventDefault();\n        checkIfUserIsValid();\n    };\n\n    function checkIfUserIsValid() {\n        props.dispatch(checkUser(values.email, values.username, values.isAdmin));\n        setRendered(true);\n        setNext(true);\n    }\n\n    useEffect(() => {\n        if (isValid.error) {\n            if (rendered) {\n                if (isValid.error.type === 'username') {\n                    props.handleChange('usernameError', isValid.error.message);\n                } else {\n                    props.handleChange('emailError', isValid.error.message);\n                }\n            }\n        } else {\n            if (next) {\n                props.nextStep();\n            }\n        }\n    }, [isValid]);\n\n    let options = null;\n\n    if (values.province) {\n        options = provincesAndCities[values.province].map((elem) => (\n            <MenuItem key={elem} value={elem}>\n                {elem}\n            </MenuItem>\n        ));\n    }\n\n    const onBlurPassword = (e) => {\n        if (values.password !== '' && values.password2 !== '') {\n            if (values.password !== values.password2) {\n                setPasswordError('Passwords do not match.');\n            } else {\n                setPasswordError('');\n            }\n        }\n    };\n\n    return (\n        <div className={classes.usersignUpRoot}>\n            <Paper className={classes.signUpPaper} component=\"form\">\n                <div className={classes.signUpRow}>\n                    <Typography variant=\"h4\" align=\"center\">\n                        Welcome to the Breender App!\n                    </Typography>\n                </div>\n                <div className={classes.signUpRow}>\n                    <TextField\n                        label=\"Email\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        fullWidth\n                        value={values.email}\n                        onChange={(e) => props.handleChange('email', e)}\n                        error={errors.emailError !== ''}\n                        helperText={errors.emailError !== '' ? errors.emailError : null}\n                        type=\"email\"\n                    />\n                </div>\n                <div className={classes.signUpRow}>\n                    <TextField\n                        label=\"Username\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        fullWidth\n                        value={values.username}\n                        onChange={(e) => props.handleChange('username', e)}\n                        error={errors.usernameError !== ''}\n                        helperText={errors.usernameError !== '' ? errors.usernameError : null}\n                    />\n                </div>\n                <div className={classes.signUpRow}>\n                    <TextField\n                        label=\"Password\"\n                        fullWidth\n                        variant=\"outlined\"\n                        size=\"small\"\n                        value={values.password}\n                        onChange={(e) => props.handleChange('password', e)}\n                        error={passwordError !== ''}\n                        type=\"password\"\n                    />\n                </div>\n                <div className={classes.signUpRow}>\n                    <TextField\n                        label=\"Repeat Password\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        fullWidth\n                        value={values.password2}\n                        onChange={(e) => props.handleChange('password2', e)}\n                        error={passwordError !== ''}\n                        onBlur={onBlurPassword}\n                        type=\"password\"\n                    />\n                </div>\n                <Grid container spacing={2} style={{ paddingTop: 20 }}>\n                    <Grid item xs={6}>\n                        <FormControl required variant=\"outlined\" size=\"small\" fullWidth>\n                            <InputLabel>State/Province</InputLabel>\n                            <Select label=\"State/Province\" value={values.province} onChange={(e) => props.handleChange('province', e)}>\n                                <MenuItem value={'bavaria'}>Bavaria</MenuItem>\n                                <MenuItem value={'lower-saxony'}>Lower Saxony</MenuItem>\n                                <MenuItem value={'baden-wuerttemberg'}>Baden-Württemberg</MenuItem>\n                                <MenuItem value={'north-rhine-westphalia'}>North Rhine-Westphalia</MenuItem>\n                            </Select>\n                        </FormControl>\n                    </Grid>\n                    <Grid item xs={6}>\n                        <FormControl required variant=\"outlined\" size=\"small\" fullWidth>\n                            <InputLabel>City</InputLabel>\n                            <Select label=\"City\" value={values.city} onChange={(e) => props.handleChange('city', e)}>\n                                {options}\n                            </Select>\n                        </FormControl>\n                    </Grid>\n                </Grid>\n                <div className={classes.signUpRow}>\n                    <FormControlLabel control={<Checkbox checked={values.isAdmin} onChange={(e) => props.handleChange('isAdmin', e)} style={{color: \"#D37F65\"}} />} label=\"Is Admin\" />\n                </div>\n                {passwordError !== '' ? (\n                    <div className={classes.signUpRow}>\n                        <Typography color=\"error\">{passwordError}</Typography>\n                    </div>\n                ) : null}\n                <div className={classes.signUpRow + ' ' + classes.signUpButtons}>\n                    <Button variant=\"outlined\" color=\"primary\" className={classes.signUpButton} onClick={props.onCancel}>\n                        Cancel\n                    </Button>\n                    <Button\n                        className={classes.signUpButton}\n                        variant=\"contained\"\n                        color=\"primary\"\n                        disabled={\n                            values.email === '' ||\n                            errors.emailError !== '' ||\n                            values.username === '' ||\n                            errors.usernameError !== '' ||\n                            values.password === '' ||\n                            values.password2 === '' ||\n                            values.password !== values.password2 ||\n                            values.province === '' ||\n                            values.city === '' ||\n                            passwordError !== ''\n                        }\n                        onClick={saveAndContinue}\n                    >\n                        Next\n                    </Button>\n                </div>\n            </Paper>\n        </div>\n    );\n}\n\nexport default connect()(SignUpComponent);\n"]},"metadata":{},"sourceType":"module"}
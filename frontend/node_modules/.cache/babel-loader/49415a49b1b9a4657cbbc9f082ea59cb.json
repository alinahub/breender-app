{"ast":null,"code":"import _defineProperty from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{connect,useDispatch}from'react-redux';import{makeStyles}from'@material-ui/core/styles';import{Button,CircularProgress}from'@material-ui/core';import{useHistory,useLocation}from'react-router-dom';// components import\nimport{PetInformationForm,PetPhotosForm}from'components/forms';import Loading from'components/Loading';// state imports\nimport{usePet,usePetCompetitions,usePetDocuments,usePetPictures,usePetProfilePictureToRemove,usePetProfilePictureToUpload}from'helper/hooks/pets.hooks';import{changePet,getPet,updateCompetitionsToUpload,updateDocumentsToUpload,updatePicturesToUpload,updateProfilePicture,getUserPets}from'redux/actions';// helpers import\nimport{useUser}from'helper/hooks/auth.hooks';import{UPLOAD_STATUS}from'helper/types';import{isObjEmpty}from'helper/helpers';// services import\nimport{NotificationService,FirebaseService}from'services';import{useLoggedInUser}from'helper/hooks/auth.hooks';/**\n * \n * @param {*} props \n * Main view to edit/modify an existing pet\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPetView=function EditPetView(props){var classes=useStyles();var dispatch=useDispatch();var history=useHistory();var location=useLocation();var id=location.pathname.split('/edit/pet/')[1];var pet=usePet();var user=useUser();var loggedInUser=useLoggedInUser();useEffect(function(){// remove old profile picture\ndispatch(updateProfilePicture({}));if(pet.officialName){setLoading(false);}else{var fetchPet=function fetchPet(){dispatch(getPet(id));setLoading(false);};fetchPet();}},[dispatch,id,pet.officialName]);// get pet upload states\nvar petDocuments=usePetDocuments();var petCompetitions=usePetCompetitions();var petPictures=usePetPictures();var petProfilePictureToUpload=usePetProfilePictureToUpload();var petProfilePictureToRemove=usePetProfilePictureToRemove();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),buttonLoading=_useState4[0],setButtonLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),formIsDisabled=_useState6[0],setFormIsDisabled=_useState6[1];var _useState7=useState(pet.officialName),_useState8=_slicedToArray(_useState7,2),name=_useState8[0],setName=_useState8[1];var _useState9=useState(pet.nickname),_useState10=_slicedToArray(_useState9,2),nickname=_useState10[0],setNickname=_useState10[1];var _useState11=useState(pet.sex),_useState12=_slicedToArray(_useState11,2),sex=_useState12[0],setSex=_useState12[1];var _useState13=useState(new Date(pet.birthDate)),_useState14=_slicedToArray(_useState13,2),birthDate=_useState14[0],setBirthDate=_useState14[1];var _useState15=useState(pet.species),_useState16=_slicedToArray(_useState15,2),species=_useState16[0],setSpecies=_useState16[1];var _useState17=useState(pet.breed),_useState18=_slicedToArray(_useState17,2),breed=_useState18[0],setBreed=_useState18[1];var _useState19=useState(pet.price),_useState20=_slicedToArray(_useState19,2),price=_useState20[0],setPrice=_useState20[1];var _useState21=useState(pet.purchased),_useState22=_slicedToArray(_useState21,2),purchased=_useState22[0],setPurchased=_useState22[1];useEffect(function(){// update upload states\nif(loading){dispatch(updateProfilePicture(pet.profilePicture,{}));dispatch(updatePicturesToUpload(pet.pictures));dispatch(updateCompetitionsToUpload(pet.competitions));dispatch(updateDocumentsToUpload(pet.documents));}if(pet.officialName){setLoading(false);}else{var fetchPet=function fetchPet(){dispatch(getPet(id));setLoading(false);};fetchPet();}},[dispatch,id,pet.documents,pet.competitions,pet.profilePicture,pet.pictures,pet.officialName,loading]);var isEmpty=function isEmpty(str){return str===''||str===undefined;};useEffect(function(){var disabled=isEmpty(name)||isObjEmpty(petProfilePictureToUpload)||isEmpty(sex)||isEmpty(species)||isEmpty(breed);setFormIsDisabled(disabled);},[name,sex,breed,species,petProfilePictureToUpload]);useEffect(function(){if(pet.ownerId!==user.id){history.goBack();NotificationService.notify('error','Navigation Error','This information is restricted');}},[pet.ownerId,user.id,history]);var uploadCompetitions=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var competitionsData,index,value,metadata,url,y,toDelete,competitions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:competitionsData=_toConsumableArray(petCompetitions);index=0;case 2:if(!(index<competitionsData.length)){_context.next=23;break;}value=competitionsData[index];if(!(value.certificate&&Object.keys(value.certificate).length!==0)){_context.next=11;break;}if(!(value.certificate.status===UPLOAD_STATUS.UPLOAD)){_context.next=11;break;}metadata={contentType:value.certificate.type};_context.next=9;return FirebaseService.upload(value.certificate.path,value.certificate.data,metadata);case 9:url=_context.sent;competitionsData[index].certificate.url=url;case 11:if(!(value.certificates&&Object.keys(value.certificates).length!==0)){_context.next=20;break;}y=0;case 13:if(!(y<value.certificates.length)){_context.next=20;break;}toDelete=value.certificates[y];_context.next=17;return FirebaseService.remove(toDelete.path);case 17:y++;_context.next=13;break;case 20:index++;_context.next=2;break;case 23:competitions=competitionsData.filter(function(value){return value.certificate.status!==UPLOAD_STATUS.DELETE;});_context.next=26;return dispatch(updateCompetitionsToUpload(competitions));case 26:return _context.abrupt(\"return\",competitions);case 27:case\"end\":return _context.stop();}}},_callee);}));return function uploadCompetitions(){return _ref.apply(this,arguments);};}();var uploadDocuments=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var documentsData,index,value,metadata,url,docs;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:documentsData=_toConsumableArray(petDocuments);index=0;case 2:if(!(index<documentsData.length)){_context2.next=18;break;}value=documentsData[index];if(!(value.status===UPLOAD_STATUS.UPLOAD)){_context2.next=12;break;}metadata={contentType:value.type};_context2.next=8;return FirebaseService.upload(value.path,value.data,metadata);case 8:url=_context2.sent;documentsData[index].url=url;_context2.next=15;break;case 12:if(!(value.status===UPLOAD_STATUS.DELETE)){_context2.next=15;break;}_context2.next=15;return FirebaseService.remove(value.path);case 15:index++;_context2.next=2;break;case 18:docs=documentsData.filter(function(value){return value.status!==UPLOAD_STATUS.DELETE;});_context2.next=21;return dispatch(updateDocumentsToUpload(docs));case 21:return _context2.abrupt(\"return\",docs);case 22:case\"end\":return _context2.stop();}}},_callee2);}));return function uploadDocuments(){return _ref2.apply(this,arguments);};}();var uploadPictures=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var picturesData,index,value,metadata,url,pics;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:picturesData=_toConsumableArray(petPictures);index=0;case 2:if(!(index<picturesData.length)){_context3.next=18;break;}value=picturesData[index];if(!(value.status===UPLOAD_STATUS.UPLOAD)){_context3.next=12;break;}metadata={contentType:'image/png'};_context3.next=8;return FirebaseService.upload(value.path,value.data,metadata);case 8:url=_context3.sent;picturesData[index].src=url;_context3.next=15;break;case 12:if(!(value.status===UPLOAD_STATUS.DELETE)){_context3.next=15;break;}_context3.next=15;return FirebaseService.remove(value.path);case 15:index++;_context3.next=2;break;case 18:pics=picturesData.filter(function(value){return value.status!==UPLOAD_STATUS.DELETE;});_context3.next=21;return dispatch(updatePicturesToUpload(pics));case 21:return _context3.abrupt(\"return\",pics);case 22:case\"end\":return _context3.stop();}}},_callee3);}));return function uploadPictures(){return _ref3.apply(this,arguments);};}();var uploadProfilePicture=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var value,metadata,url;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(Object.keys(petProfilePictureToRemove).length!==0&&(petProfilePictureToRemove===null||petProfilePictureToRemove===void 0?void 0:petProfilePictureToRemove.src)!=='')){_context4.next=14;break;}_context4.next=3;return FirebaseService.remove(petProfilePictureToRemove.path);case 3:// upload new one\nvalue=petProfilePictureToUpload;metadata={contentType:'image/png'};_context4.next=7;return FirebaseService.upload(value.path,value.data,metadata);case 7:url=_context4.sent;value.src=url;_context4.next=11;return dispatch(updateProfilePicture(value,{}));case 11:return _context4.abrupt(\"return\",value);case 14:return _context4.abrupt(\"return\",pet.profilePicture);case 15:case\"end\":return _context4.stop();}}},_callee4);}));return function uploadProfilePicture(){return _ref4.apply(this,arguments);};}();var updatePet=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var documents,competitions,pictures,profilePicture,dateCreated,petToUpload,onSuccess,onError;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setButtonLoading(true);// upload documents and pics to firebase first\n_context5.next=3;return uploadDocuments();case 3:documents=_context5.sent;_context5.next=6;return uploadCompetitions();case 6:competitions=_context5.sent;_context5.next=9;return uploadPictures();case 9:pictures=_context5.sent;_context5.next=12;return uploadProfilePicture();case 12:profilePicture=_context5.sent;dateCreated=Date.now();// combine all information about a pet\npetToUpload={id:id,ownerId:user.id,officialName:name,nickname:nickname,birthDate:birthDate,sex:sex,price:price,profilePicture:profilePicture,pictures:pictures,dateCreated:dateCreated,breed:breed,species:species,competitions:competitions,documents:documents,purchased:purchased};onSuccess=function onSuccess(){NotificationService.notify('success','Success','Your four-legged friend was successfully updated!');history.push('/');// update pets of logged in user in redux store\ndispatch(getUserPets(user.id));};onError=function onError(){NotificationService.notify('error','Error','There was a problem updating your pet.');};_context5.next=19;return dispatch(changePet(petToUpload,onSuccess,onError));case 19:setButtonLoading(false);case 20:case\"end\":return _context5.stop();}}},_callee5);}));return function updatePet(){return _ref5.apply(this,arguments);};}();// on canceling the view\nvar onCancel=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:history.goBack();case 1:case\"end\":return _context6.stop();}}},_callee6);}));return function onCancel(){return _ref6.apply(this,arguments);};}();return pet&&!loading?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.layout,children:[/*#__PURE__*/_jsx(PetPhotosForm,{}),/*#__PURE__*/_jsx(PetInformationForm,{nameProp:{name:name,setName:setName},nicknameProp:{nickname:nickname,setNickname:setNickname},sexProp:{sex:sex,setSex:setSex},birthDateProp:{birthDate:birthDate,setBirthDate:setBirthDate},speciesProp:{species:species,setSpecies:setSpecies},breedProp:{breed:breed,setBreed:setBreed},priceProp:{price:price,setPrice:setPrice},disabledProp:{formIsDisabled:formIsDisabled,setFormIsDisabled:setFormIsDisabled},purchasedProp:{purchased:purchased,setPurchased:setPurchased},user:loggedInUser})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.button,children:[/*#__PURE__*/_jsx(Button,{onClick:onCancel,variant:\"contained\",color:\"secondary\",size:\"large\",style:{marginRight:20},children:\"Cancel\"}),/*#__PURE__*/_jsxs(Button,{disabled:formIsDisabled,onClick:updatePet,type:\"submit\",variant:\"contained\",color:\"primary\",size:\"large\",children:[buttonLoading?/*#__PURE__*/_jsx(CircularProgress,{size:20,style:{marginRight:10,color:'white'}}):'',\" Save\"]})]})]}):/*#__PURE__*/_jsx(Loading,{});};var useStyles=makeStyles(function(theme){return{layout:_defineProperty({display:'flex',width:'100%',justifyContent:'center'},theme.breakpoints.down('sm'),{flexDirection:'column',width:'auto',alignItems:'center'}),button:{display:'flex',justifyContent:'flex-end',marginRight:20,marginBottom:25,marginTop:-25}};});// connect() establishes the connection to the redux functionalities\nexport default connect()(EditPetView);","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/views/EditPetView.js"],"names":["React","useEffect","useState","connect","useDispatch","makeStyles","Button","CircularProgress","useHistory","useLocation","PetInformationForm","PetPhotosForm","Loading","usePet","usePetCompetitions","usePetDocuments","usePetPictures","usePetProfilePictureToRemove","usePetProfilePictureToUpload","changePet","getPet","updateCompetitionsToUpload","updateDocumentsToUpload","updatePicturesToUpload","updateProfilePicture","getUserPets","useUser","UPLOAD_STATUS","isObjEmpty","NotificationService","FirebaseService","useLoggedInUser","EditPetView","props","classes","useStyles","dispatch","history","location","id","pathname","split","pet","user","loggedInUser","officialName","setLoading","fetchPet","petDocuments","petCompetitions","petPictures","petProfilePictureToUpload","petProfilePictureToRemove","loading","buttonLoading","setButtonLoading","formIsDisabled","setFormIsDisabled","name","setName","nickname","setNickname","sex","setSex","Date","birthDate","setBirthDate","species","setSpecies","breed","setBreed","price","setPrice","purchased","setPurchased","profilePicture","pictures","competitions","documents","isEmpty","str","undefined","disabled","ownerId","goBack","notify","uploadCompetitions","competitionsData","index","length","value","certificate","Object","keys","status","UPLOAD","metadata","contentType","type","upload","path","data","url","certificates","y","toDelete","remove","filter","DELETE","uploadDocuments","documentsData","docs","uploadPictures","picturesData","src","pics","uploadProfilePicture","updatePet","dateCreated","now","petToUpload","onSuccess","push","onError","onCancel","layout","button","marginRight","color","theme","display","width","justifyContent","breakpoints","down","flexDirection","alignItems","marginBottom","marginTop"],"mappings":"g0BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,OAAT,CAAkBC,WAAlB,KAAqC,aAArC,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,OAASC,MAAT,CAAiBC,gBAAjB,KAAyC,mBAAzC,CACA,OAASC,UAAT,CAAqBC,WAArB,KAAwC,kBAAxC,CACA;AACA,OAASC,kBAAT,CAA6BC,aAA7B,KAAkD,kBAAlD,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA;AACA,OAASC,MAAT,CAAiBC,kBAAjB,CAAqCC,eAArC,CAAsDC,cAAtD,CAAsEC,4BAAtE,CAAoGC,4BAApG,KAAwI,yBAAxI,CACA,OAASC,SAAT,CAAoBC,MAApB,CAA4BC,0BAA5B,CAAwDC,uBAAxD,CAAiFC,sBAAjF,CAAyGC,oBAAzG,CAA+HC,WAA/H,KAAkJ,eAAlJ,CACA;AACA,OAASC,OAAT,KAAwB,yBAAxB,CACA,OAASC,aAAT,KAA8B,cAA9B,CACA,OAASC,UAAT,KAA2B,gBAA3B,CACA;AACA,OAASC,mBAAT,CAA8BC,eAA9B,KAAqD,UAArD,CACA,OAASC,eAAT,KAAgC,yBAAhC,CAEA;AACA;AACA;AACA;AACA,G,wFACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC3B,GAAMC,CAAAA,OAAO,CAAGC,SAAS,EAAzB,CACA,GAAMC,CAAAA,QAAQ,CAAGhC,WAAW,EAA5B,CACA,GAAMiC,CAAAA,OAAO,CAAG7B,UAAU,EAA1B,CACA,GAAM8B,CAAAA,QAAQ,CAAG7B,WAAW,EAA5B,CAEA,GAAM8B,CAAAA,EAAE,CAAGD,QAAQ,CAACE,QAAT,CAAkBC,KAAlB,CAAwB,YAAxB,EAAsC,CAAtC,CAAX,CACA,GAAMC,CAAAA,GAAG,CAAG7B,MAAM,EAAlB,CACA,GAAM8B,CAAAA,IAAI,CAAGjB,OAAO,EAApB,CACA,GAAMkB,CAAAA,YAAY,CAAGb,eAAe,EAApC,CAEA9B,SAAS,CAAC,UAAM,CACZ;AACAmC,QAAQ,CAACZ,oBAAoB,CAAC,EAAD,CAArB,CAAR,CAEA,GAAIkB,GAAG,CAACG,YAAR,CAAsB,CAClBC,UAAU,CAAC,KAAD,CAAV,CACH,CAFD,IAEO,CACH,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnBX,QAAQ,CAAChB,MAAM,CAACmB,EAAD,CAAP,CAAR,CACAO,UAAU,CAAC,KAAD,CAAV,CACH,CAHD,CAIAC,QAAQ,GACX,CAEJ,CAdQ,CAcN,CAACX,QAAD,CAAWG,EAAX,CAAeG,GAAG,CAACG,YAAnB,CAdM,CAAT,CAeA;AACA,GAAMG,CAAAA,YAAY,CAAGjC,eAAe,EAApC,CACA,GAAMkC,CAAAA,eAAe,CAAGnC,kBAAkB,EAA1C,CACA,GAAMoC,CAAAA,WAAW,CAAGlC,cAAc,EAAlC,CACA,GAAMmC,CAAAA,yBAAyB,CAAGjC,4BAA4B,EAA9D,CACA,GAAMkC,CAAAA,yBAAyB,CAAGnC,4BAA4B,EAA9D,CAEA,cAA8Bf,QAAQ,CAAC,IAAD,CAAtC,wCAAOmD,OAAP,eAAgBP,UAAhB,eACA,eAA0C5C,QAAQ,CAAC,KAAD,CAAlD,yCAAOoD,aAAP,eAAsBC,gBAAtB,eACA,eAA4CrD,QAAQ,CAAC,KAAD,CAApD,yCAAOsD,cAAP,eAAuBC,iBAAvB,eACA,eAAwBvD,QAAQ,CAACwC,GAAG,CAACG,YAAL,CAAhC,yCAAOa,IAAP,eAAaC,OAAb,eACA,eAAgCzD,QAAQ,CAACwC,GAAG,CAACkB,QAAL,CAAxC,0CAAOA,QAAP,gBAAiBC,WAAjB,gBACA,gBAAsB3D,QAAQ,CAACwC,GAAG,CAACoB,GAAL,CAA9B,2CAAOA,GAAP,gBAAYC,MAAZ,gBACA,gBAAkC7D,QAAQ,CAAC,GAAI8D,CAAAA,IAAJ,CAAStB,GAAG,CAACuB,SAAb,CAAD,CAA1C,2CAAOA,SAAP,gBAAkBC,YAAlB,gBACA,gBAA8BhE,QAAQ,CAACwC,GAAG,CAACyB,OAAL,CAAtC,2CAAOA,OAAP,gBAAgBC,UAAhB,gBACA,gBAA0BlE,QAAQ,CAACwC,GAAG,CAAC2B,KAAL,CAAlC,2CAAOA,KAAP,gBAAcC,QAAd,gBACA,gBAA0BpE,QAAQ,CAACwC,GAAG,CAAC6B,KAAL,CAAlC,2CAAOA,KAAP,gBAAcC,QAAd,gBACA,gBAAkCtE,QAAQ,CAACwC,GAAG,CAAC+B,SAAL,CAA1C,2CAAOA,SAAP,gBAAkBC,YAAlB,gBAEAzE,SAAS,CAAC,UAAM,CACZ;AACA,GAAIoD,OAAJ,CAAa,CACTjB,QAAQ,CAACZ,oBAAoB,CAACkB,GAAG,CAACiC,cAAL,CAAqB,EAArB,CAArB,CAAR,CACAvC,QAAQ,CAACb,sBAAsB,CAACmB,GAAG,CAACkC,QAAL,CAAvB,CAAR,CACAxC,QAAQ,CAACf,0BAA0B,CAACqB,GAAG,CAACmC,YAAL,CAA3B,CAAR,CACAzC,QAAQ,CAACd,uBAAuB,CAACoB,GAAG,CAACoC,SAAL,CAAxB,CAAR,CACH,CAED,GAAIpC,GAAG,CAACG,YAAR,CAAsB,CAClBC,UAAU,CAAC,KAAD,CAAV,CACH,CAFD,IAEO,CACH,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnBX,QAAQ,CAAChB,MAAM,CAACmB,EAAD,CAAP,CAAR,CACAO,UAAU,CAAC,KAAD,CAAV,CACH,CAHD,CAIAC,QAAQ,GACX,CACJ,CAlBQ,CAkBN,CAACX,QAAD,CAAWG,EAAX,CAAeG,GAAG,CAACoC,SAAnB,CAA8BpC,GAAG,CAACmC,YAAlC,CAAgDnC,GAAG,CAACiC,cAApD,CAAoEjC,GAAG,CAACkC,QAAxE,CAAkFlC,GAAG,CAACG,YAAtF,CAAoGQ,OAApG,CAlBM,CAAT,CAoBA,GAAM0B,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,GAAD,QAASA,CAAAA,GAAG,GAAK,EAAR,EAAcA,GAAG,GAAKC,SAA/B,EAAhB,CAEAhF,SAAS,CAAC,UAAM,CACZ,GAAMiF,CAAAA,QAAQ,CAAGH,OAAO,CAACrB,IAAD,CAAP,EAAiB9B,UAAU,CAACuB,yBAAD,CAA3B,EAA0D4B,OAAO,CAACjB,GAAD,CAAjE,EAA0EiB,OAAO,CAACZ,OAAD,CAAjF,EAA8FY,OAAO,CAACV,KAAD,CAAtH,CACAZ,iBAAiB,CAACyB,QAAD,CAAjB,CACH,CAHQ,CAGN,CAACxB,IAAD,CAAOI,GAAP,CAAYO,KAAZ,CAAmBF,OAAnB,CAA4BhB,yBAA5B,CAHM,CAAT,CAKAlD,SAAS,CAAC,UAAM,CACZ,GAAIyC,GAAG,CAACyC,OAAJ,GAAgBxC,IAAI,CAACJ,EAAzB,CAA6B,CACzBF,OAAO,CAAC+C,MAAR,GACAvD,mBAAmB,CAACwD,MAApB,CAA2B,OAA3B,CAAoC,kBAApC,CAAwD,gCAAxD,EACH,CACJ,CALQ,CAKN,CAAC3C,GAAG,CAACyC,OAAL,CAAcxC,IAAI,CAACJ,EAAnB,CAAuBF,OAAvB,CALM,CAAT,CAOA,GAAMiD,CAAAA,kBAAkB,0FAAG,yMACjBC,gBADiB,oBACMtC,eADN,EAEduC,KAFc,CAEN,CAFM,aAEHA,KAAK,CAAGD,gBAAgB,CAACE,MAFtB,2BAGfC,KAHe,CAGPH,gBAAgB,CAACC,KAAD,CAHT,MAKfE,KAAK,CAACC,WAAN,EAAqBC,MAAM,CAACC,IAAP,CAAYH,KAAK,CAACC,WAAlB,EAA+BF,MAA/B,GAA0C,CALhD,gCAMXC,KAAK,CAACC,WAAN,CAAkBG,MAAlB,GAA6BnE,aAAa,CAACoE,MANhC,2BAOLC,QAPK,CAOM,CACbC,WAAW,CAAEP,KAAK,CAACC,WAAN,CAAkBO,IADlB,CAPN,uBAUKpE,CAAAA,eAAe,CAACqE,MAAhB,CAAuBT,KAAK,CAACC,WAAN,CAAkBS,IAAzC,CAA+CV,KAAK,CAACC,WAAN,CAAkBU,IAAjE,CAAuEL,QAAvE,CAVL,QAUPM,GAVO,eAWXf,gBAAgB,CAACC,KAAD,CAAhB,CAAwBG,WAAxB,CAAoCW,GAApC,CAA0CA,GAA1C,CAXW,aAefZ,KAAK,CAACa,YAAN,EAAsBX,MAAM,CAACC,IAAP,CAAYH,KAAK,CAACa,YAAlB,EAAgCd,MAAhC,GAA2C,CAflD,2BAgBNe,CAhBM,CAgBF,CAhBE,cAgBCA,CAAC,CAAGd,KAAK,CAACa,YAAN,CAAmBd,MAhBxB,2BAiBPgB,QAjBO,CAiBIf,KAAK,CAACa,YAAN,CAAmBC,CAAnB,CAjBJ,wBAkBL1E,CAAAA,eAAe,CAAC4E,MAAhB,CAAuBD,QAAQ,CAACL,IAAhC,CAlBK,SAgBgCI,CAAC,EAhBjC,gCAE8BhB,KAAK,EAFnC,+BAuBnBX,YAvBmB,CAuBJU,gBAAgB,CAACoB,MAAjB,CAAwB,SAACjB,KAAD,QAAWA,CAAAA,KAAK,CAACC,WAAN,CAAkBG,MAAlB,GAA6BnE,aAAa,CAACiF,MAAtD,EAAxB,CAvBI,wBAwBjBxE,CAAAA,QAAQ,CAACf,0BAA0B,CAACwD,YAAD,CAA3B,CAxBS,yCA0BhBA,YA1BgB,yDAAH,kBAAlBS,CAAAA,kBAAkB,0CAAxB,CA6BA,GAAMuB,CAAAA,eAAe,2FAAG,wLACdC,aADc,oBACM9D,YADN,EAEXwC,KAFW,CAEH,CAFG,aAEAA,KAAK,CAAGsB,aAAa,CAACrB,MAFtB,4BAGZC,KAHY,CAGJoB,aAAa,CAACtB,KAAD,CAHT,MAKZE,KAAK,CAACI,MAAN,GAAiBnE,aAAa,CAACoE,MALnB,4BAMNC,QANM,CAMK,CACbC,WAAW,CAAEP,KAAK,CAACQ,IADN,CANL,wBASIpE,CAAAA,eAAe,CAACqE,MAAhB,CAAuBT,KAAK,CAACU,IAA7B,CAAmCV,KAAK,CAACW,IAAzC,CAA+CL,QAA/C,CATJ,QASRM,GATQ,gBAUZQ,aAAa,CAACtB,KAAD,CAAb,CAAqBc,GAArB,CAA2BA,GAA3B,CAVY,qCAWLZ,KAAK,CAACI,MAAN,GAAiBnE,aAAa,CAACiF,MAX1B,oDAYN9E,CAAAA,eAAe,CAAC4E,MAAhB,CAAuBhB,KAAK,CAACU,IAA7B,CAZM,SAE8BZ,KAAK,EAFnC,gCAgBhBuB,IAhBgB,CAgBTD,aAAa,CAACH,MAAd,CAAqB,SAACjB,KAAD,QAAWA,CAAAA,KAAK,CAACI,MAAN,GAAiBnE,aAAa,CAACiF,MAA1C,EAArB,CAhBS,yBAiBdxE,CAAAA,QAAQ,CAACd,uBAAuB,CAACyF,IAAD,CAAxB,CAjBM,0CAmBbA,IAnBa,2DAAH,kBAAfF,CAAAA,eAAe,2CAArB,CAsBA,GAAMG,CAAAA,cAAc,2FAAG,uLACbC,YADa,oBACM/D,WADN,EAEVsC,KAFU,CAEF,CAFE,aAECA,KAAK,CAAGyB,YAAY,CAACxB,MAFtB,4BAGXC,KAHW,CAGHuB,YAAY,CAACzB,KAAD,CAHT,MAKXE,KAAK,CAACI,MAAN,GAAiBnE,aAAa,CAACoE,MALpB,4BAMLC,QANK,CAMM,CACbC,WAAW,CAAE,WADA,CANN,wBAUKnE,CAAAA,eAAe,CAACqE,MAAhB,CAAuBT,KAAK,CAACU,IAA7B,CAAmCV,KAAK,CAACW,IAAzC,CAA+CL,QAA/C,CAVL,QAUPM,GAVO,gBAWXW,YAAY,CAACzB,KAAD,CAAZ,CAAoB0B,GAApB,CAA0BZ,GAA1B,CAXW,qCAYJZ,KAAK,CAACI,MAAN,GAAiBnE,aAAa,CAACiF,MAZ3B,oDAaL9E,CAAAA,eAAe,CAAC4E,MAAhB,CAAuBhB,KAAK,CAACU,IAA7B,CAbK,SAE8BZ,KAAK,EAFnC,gCAgBb2B,IAhBa,CAgBNF,YAAY,CAACN,MAAb,CAAoB,SAACjB,KAAD,QAAWA,CAAAA,KAAK,CAACI,MAAN,GAAiBnE,aAAa,CAACiF,MAA1C,EAApB,CAhBM,yBAiBbxE,CAAAA,QAAQ,CAACb,sBAAsB,CAAC4F,IAAD,CAAvB,CAjBK,0CAmBZA,IAnBY,2DAAH,kBAAdH,CAAAA,cAAc,2CAApB,CAsBA,GAAMI,CAAAA,oBAAoB,2FAAG,oKAErBxB,MAAM,CAACC,IAAP,CAAYzC,yBAAZ,EAAuCqC,MAAvC,GAAkD,CAAlD,EAAuD,CAAArC,yBAAyB,OAAzB,EAAAA,yBAAyB,SAAzB,QAAAA,yBAAyB,CAAE8D,GAA3B,IAAmC,EAFrE,mDAIfpF,CAAAA,eAAe,CAAC4E,MAAhB,CAAuBtD,yBAAyB,CAACgD,IAAjD,CAJe,QAMrB;AACIV,KAPiB,CAOTvC,yBAPS,CAQf6C,QARe,CAQJ,CACbC,WAAW,CAAE,WADA,CARI,wBAYLnE,CAAAA,eAAe,CAACqE,MAAhB,CAAuBT,KAAK,CAACU,IAA7B,CAAmCV,KAAK,CAACW,IAAzC,CAA+CL,QAA/C,CAZK,QAYjBM,GAZiB,gBAarBZ,KAAK,CAACwB,GAAN,CAAYZ,GAAZ,CAbqB,wBAeflE,CAAAA,QAAQ,CAACZ,oBAAoB,CAACkE,KAAD,CAAQ,EAAR,CAArB,CAfO,0CAiBdA,KAjBc,2CAmBdhD,GAAG,CAACiC,cAnBU,2DAAH,kBAApByC,CAAAA,oBAAoB,2CAA1B,CAuBA,GAAMC,CAAAA,SAAS,2FAAG,qOACd9D,gBAAgB,CAAC,IAAD,CAAhB,CAEA;AAHc,uBAIUsD,CAAAA,eAAe,EAJzB,QAIR/B,SAJQ,uCAKaQ,CAAAA,kBAAkB,EAL/B,QAKRT,YALQ,uCAMSmC,CAAAA,cAAc,EANvB,QAMRpC,QANQ,wCAOewC,CAAAA,oBAAoB,EAPnC,SAORzC,cAPQ,gBASR2C,WATQ,CASMtD,IAAI,CAACuD,GAAL,EATN,CAUd;AACIC,WAXU,CAWI,CACdjF,EAAE,CAAEA,EADU,CAEd4C,OAAO,CAAExC,IAAI,CAACJ,EAFA,CAGdM,YAAY,CAAEa,IAHA,CAIdE,QAAQ,CAAEA,QAJI,CAKdK,SAAS,CAAEA,SALG,CAMdH,GAAG,CAAEA,GANS,CAOdS,KAAK,CAAEA,KAPO,CAQdI,cAAc,CAAEA,cARF,CASdC,QAAQ,CAAEA,QATI,CAUd0C,WAAW,CAAEA,WAVC,CAWdjD,KAAK,CAAEA,KAXO,CAYdF,OAAO,CAAEA,OAZK,CAadU,YAAY,CAAEA,YAbA,CAcdC,SAAS,CAAEA,SAdG,CAedL,SAAS,CAAEA,SAfG,CAXJ,CA6BRgD,SA7BQ,CA6BI,QAAZA,CAAAA,SAAY,EAAM,CACpB5F,mBAAmB,CAACwD,MAApB,CAA2B,SAA3B,CAAsC,SAAtC,CAAiD,mDAAjD,EACAhD,OAAO,CAACqF,IAAR,CAAa,GAAb,EACA;AACAtF,QAAQ,CAACX,WAAW,CAACkB,IAAI,CAACJ,EAAN,CAAZ,CAAR,CACH,CAlCa,CAoCRoF,OApCQ,CAoCE,QAAVA,CAAAA,OAAU,EAAM,CAClB9F,mBAAmB,CAACwD,MAApB,CAA2B,OAA3B,CAAoC,OAApC,CAA6C,wCAA7C,EACH,CAtCa,yBAwCRjD,CAAAA,QAAQ,CAACjB,SAAS,CAACqG,WAAD,CAAcC,SAAd,CAAyBE,OAAzB,CAAV,CAxCA,SAyCdpE,gBAAgB,CAAC,KAAD,CAAhB,CAzCc,yDAAH,kBAAT8D,CAAAA,SAAS,2CAAf,CA4CA;AACA,GAAMO,CAAAA,QAAQ,2FAAG,wIACbvF,OAAO,CAAC+C,MAAR,GADa,wDAAH,kBAARwC,CAAAA,QAAQ,2CAAd,CAIA,MAAOlF,CAAAA,GAAG,EAAI,CAACW,OAAR,cACH,oCACI,aAAK,SAAS,CAAEnB,OAAO,CAAC2F,MAAxB,wBACI,KAAC,aAAD,IADJ,cAEI,KAAC,kBAAD,EACI,QAAQ,CAAE,CAAEnE,IAAI,CAAJA,IAAF,CAAQC,OAAO,CAAPA,OAAR,CADd,CAEI,YAAY,CAAE,CAAEC,QAAQ,CAARA,QAAF,CAAYC,WAAW,CAAXA,WAAZ,CAFlB,CAGI,OAAO,CAAE,CAAEC,GAAG,CAAHA,GAAF,CAAOC,MAAM,CAANA,MAAP,CAHb,CAII,aAAa,CAAE,CAAEE,SAAS,CAATA,SAAF,CAAaC,YAAY,CAAZA,YAAb,CAJnB,CAKI,WAAW,CAAE,CAAEC,OAAO,CAAPA,OAAF,CAAWC,UAAU,CAAVA,UAAX,CALjB,CAMI,SAAS,CAAE,CAAEC,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CANf,CAOI,SAAS,CAAE,CAAEC,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAPf,CAQI,YAAY,CAAE,CAAEhB,cAAc,CAAdA,cAAF,CAAkBC,iBAAiB,CAAjBA,iBAAlB,CARlB,CASI,aAAa,CAAE,CAAEgB,SAAS,CAATA,SAAF,CAAaC,YAAY,CAAZA,YAAb,CATnB,CAUI,IAAI,CAAE9B,YAVV,EAFJ,GADJ,cAgBI,aAAK,SAAS,CAAEV,OAAO,CAAC4F,MAAxB,wBACI,KAAC,MAAD,EAAQ,OAAO,CAAEF,QAAjB,CAA2B,OAAO,CAAC,WAAnC,CAA+C,KAAK,CAAC,WAArD,CAAiE,IAAI,CAAC,OAAtE,CAA8E,KAAK,CAAE,CAAEG,WAAW,CAAE,EAAf,CAArF,oBADJ,cAII,MAAC,MAAD,EAAQ,QAAQ,CAAEvE,cAAlB,CAAkC,OAAO,CAAE6D,SAA3C,CAAsD,IAAI,CAAC,QAA3D,CAAoE,OAAO,CAAC,WAA5E,CAAwF,KAAK,CAAC,SAA9F,CAAwG,IAAI,CAAC,OAA7G,WACK/D,aAAa,cAAG,KAAC,gBAAD,EAAkB,IAAI,CAAE,EAAxB,CAA4B,KAAK,CAAE,CAAEyE,WAAW,CAAE,EAAf,CAAmBC,KAAK,CAAE,OAA1B,CAAnC,EAAH,CAAgF,EADlG,WAJJ,GAhBJ,GADG,cA2BH,KAAC,OAAD,IA3BJ,CA6BH,CA7PD,CA+PA,GAAM7F,CAAAA,SAAS,CAAG9B,UAAU,CAAC,SAAC4H,KAAD,QAAY,CACrCJ,MAAM,kBACFK,OAAO,CAAE,MADP,CAEFC,KAAK,CAAE,MAFL,CAGFC,cAAc,CAAE,QAHd,EAIDH,KAAK,CAACI,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAJC,CAI8B,CAC5BC,aAAa,CAAE,QADa,CAE5BJ,KAAK,CAAE,MAFqB,CAG5BK,UAAU,CAAE,QAHgB,CAJ9B,CAD+B,CAWrCV,MAAM,CAAE,CACJI,OAAO,CAAE,MADL,CAEJE,cAAc,CAAE,UAFZ,CAGJL,WAAW,CAAE,EAHT,CAIJU,YAAY,CAAE,EAJV,CAKJC,SAAS,CAAE,CAAC,EALR,CAX6B,CAAZ,EAAD,CAA5B,CAqBA;AACA,cAAevI,CAAAA,OAAO,GAAG6B,WAAH,CAAtB","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect, useDispatch } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, CircularProgress } from '@material-ui/core';\nimport { useHistory, useLocation } from 'react-router-dom';\n// components import\nimport { PetInformationForm, PetPhotosForm } from 'components/forms';\nimport Loading from 'components/Loading';\n// state imports\nimport { usePet, usePetCompetitions, usePetDocuments, usePetPictures, usePetProfilePictureToRemove, usePetProfilePictureToUpload } from 'helper/hooks/pets.hooks';\nimport { changePet, getPet, updateCompetitionsToUpload, updateDocumentsToUpload, updatePicturesToUpload, updateProfilePicture, getUserPets } from 'redux/actions';\n// helpers import\nimport { useUser } from 'helper/hooks/auth.hooks';\nimport { UPLOAD_STATUS } from 'helper/types';\nimport { isObjEmpty } from 'helper/helpers';\n// services import\nimport { NotificationService, FirebaseService } from 'services';\nimport { useLoggedInUser } from 'helper/hooks/auth.hooks';\n\n/**\n * \n * @param {*} props \n * Main view to edit/modify an existing pet\n */\nconst EditPetView = (props) => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const location = useLocation();\n\n    const id = location.pathname.split('/edit/pet/')[1];\n    const pet = usePet();\n    const user = useUser();\n    const loggedInUser = useLoggedInUser();\n\n    useEffect(() => {\n        // remove old profile picture\n        dispatch(updateProfilePicture({}))\n\n        if (pet.officialName) {\n            setLoading(false);\n        } else {\n            const fetchPet = () => {\n                dispatch(getPet(id));\n                setLoading(false);\n            };\n            fetchPet();\n        }\n\n    }, [dispatch, id, pet.officialName]);\n    // get pet upload states\n    const petDocuments = usePetDocuments();\n    const petCompetitions = usePetCompetitions();\n    const petPictures = usePetPictures();\n    const petProfilePictureToUpload = usePetProfilePictureToUpload();\n    const petProfilePictureToRemove = usePetProfilePictureToRemove();\n\n    const [loading, setLoading] = useState(true);\n    const [buttonLoading, setButtonLoading] = useState(false);\n    const [formIsDisabled, setFormIsDisabled] = useState(false);\n    const [name, setName] = useState(pet.officialName);\n    const [nickname, setNickname] = useState(pet.nickname);\n    const [sex, setSex] = useState(pet.sex);\n    const [birthDate, setBirthDate] = useState(new Date(pet.birthDate));\n    const [species, setSpecies] = useState(pet.species);\n    const [breed, setBreed] = useState(pet.breed);\n    const [price, setPrice] = useState(pet.price);\n    const [purchased, setPurchased] = useState(pet.purchased);\n\n    useEffect(() => {\n        // update upload states\n        if (loading) {\n            dispatch(updateProfilePicture(pet.profilePicture, {}));\n            dispatch(updatePicturesToUpload(pet.pictures));\n            dispatch(updateCompetitionsToUpload(pet.competitions));\n            dispatch(updateDocumentsToUpload(pet.documents));\n        }\n\n        if (pet.officialName) {\n            setLoading(false);\n        } else {\n            const fetchPet = () => {\n                dispatch(getPet(id));\n                setLoading(false);\n            };\n            fetchPet();\n        }\n    }, [dispatch, id, pet.documents, pet.competitions, pet.profilePicture, pet.pictures, pet.officialName, loading]);\n\n    const isEmpty = (str) => str === '' || str === undefined;\n\n    useEffect(() => {\n        const disabled = isEmpty(name) || isObjEmpty(petProfilePictureToUpload) || isEmpty(sex) || isEmpty(species) || isEmpty(breed);\n        setFormIsDisabled(disabled);\n    }, [name, sex, breed, species, petProfilePictureToUpload]);\n\n    useEffect(() => {\n        if (pet.ownerId !== user.id) {\n            history.goBack();\n            NotificationService.notify('error', 'Navigation Error', 'This information is restricted');\n        }\n    }, [pet.ownerId, user.id, history]);\n\n    const uploadCompetitions = async () => {\n        const competitionsData = [...petCompetitions];\n        for (let index = 0; index < competitionsData.length; index++) {\n            let value = competitionsData[index];\n\n            if (value.certificate && Object.keys(value.certificate).length !== 0) {\n                if (value.certificate.status === UPLOAD_STATUS.UPLOAD) {\n                    const metadata = {\n                        contentType: value.certificate.type,\n                    };\n                    let url = await FirebaseService.upload(value.certificate.path, value.certificate.data, metadata);\n                    competitionsData[index].certificate.url = url;\n                }\n            }\n            // check if there is something to delete\n            if (value.certificates && Object.keys(value.certificates).length !== 0) {\n                for (let y = 0; y < value.certificates.length; y++) {\n                    let toDelete = value.certificates[y];\n                    await FirebaseService.remove(toDelete.path);\n                }\n            }\n        }\n\n        let competitions = competitionsData.filter((value) => value.certificate.status !== UPLOAD_STATUS.DELETE);\n        await dispatch(updateCompetitionsToUpload(competitions));\n\n        return competitions;\n    };\n\n    const uploadDocuments = async () => {\n        const documentsData = [...petDocuments];\n        for (let index = 0; index < documentsData.length; index++) {\n            let value = documentsData[index];\n\n            if (value.status === UPLOAD_STATUS.UPLOAD) {\n                const metadata = {\n                    contentType: value.type,\n                };\n                let url = await FirebaseService.upload(value.path, value.data, metadata);\n                documentsData[index].url = url;\n            } else if (value.status === UPLOAD_STATUS.DELETE) {\n                await FirebaseService.remove(value.path);\n            }\n        }\n\n        let docs = documentsData.filter((value) => value.status !== UPLOAD_STATUS.DELETE);\n        await dispatch(updateDocumentsToUpload(docs));\n\n        return docs;\n    };\n\n    const uploadPictures = async () => {\n        const picturesData = [...petPictures];\n        for (let index = 0; index < picturesData.length; index++) {\n            let value = picturesData[index];\n\n            if (value.status === UPLOAD_STATUS.UPLOAD) {\n                const metadata = {\n                    contentType: 'image/png',\n                };\n\n                let url = await FirebaseService.upload(value.path, value.data, metadata);\n                picturesData[index].src = url;\n            } else if (value.status === UPLOAD_STATUS.DELETE) {\n                await FirebaseService.remove(value.path);\n            }\n        }\n        const pics = picturesData.filter((value) => value.status !== UPLOAD_STATUS.DELETE);\n        await dispatch(updatePicturesToUpload(pics));\n\n        return pics;\n    };\n\n    const uploadProfilePicture = async () => {\n        // update profile picture only if new was uploaded\n        if (Object.keys(petProfilePictureToRemove).length !== 0 && petProfilePictureToRemove?.src !== '') {\n            // delete old one\n            await FirebaseService.remove(petProfilePictureToRemove.path);\n\n            // upload new one\n            let value = petProfilePictureToUpload;\n            const metadata = {\n                contentType: 'image/png',\n            };\n\n            let url = await FirebaseService.upload(value.path, value.data, metadata);\n            value.src = url;\n\n            await dispatch(updateProfilePicture(value, {}));\n\n            return value;\n        } else {\n            return pet.profilePicture;\n        }\n    };\n\n    const updatePet = async () => {\n        setButtonLoading(true);\n\n        // upload documents and pics to firebase first\n        const documents = await uploadDocuments();\n        const competitions = await uploadCompetitions();\n        const pictures = await uploadPictures();\n        const profilePicture = await uploadProfilePicture();\n\n        const dateCreated = Date.now();\n        // combine all information about a pet\n        let petToUpload = {\n            id: id,\n            ownerId: user.id,\n            officialName: name,\n            nickname: nickname,\n            birthDate: birthDate,\n            sex: sex,\n            price: price,\n            profilePicture: profilePicture,\n            pictures: pictures,\n            dateCreated: dateCreated,\n            breed: breed,\n            species: species,\n            competitions: competitions,\n            documents: documents,\n            purchased: purchased,\n        };\n\n        const onSuccess = () => {\n            NotificationService.notify('success', 'Success', 'Your four-legged friend was successfully updated!');\n            history.push('/');\n            // update pets of logged in user in redux store\n            dispatch(getUserPets(user.id));\n        };\n\n        const onError = () => {\n            NotificationService.notify('error', 'Error', 'There was a problem updating your pet.');\n        };\n\n        await dispatch(changePet(petToUpload, onSuccess, onError));\n        setButtonLoading(false);\n    };\n\n    // on canceling the view\n    const onCancel = async () => {\n        history.goBack();\n    };\n\n    return pet && !loading ? (\n        <div>\n            <div className={classes.layout}>\n                <PetPhotosForm />\n                <PetInformationForm\n                    nameProp={{ name, setName }}\n                    nicknameProp={{ nickname, setNickname }}\n                    sexProp={{ sex, setSex }}\n                    birthDateProp={{ birthDate, setBirthDate }}\n                    speciesProp={{ species, setSpecies }}\n                    breedProp={{ breed, setBreed }}\n                    priceProp={{ price, setPrice }}\n                    disabledProp={{ formIsDisabled, setFormIsDisabled }}\n                    purchasedProp={{ purchased, setPurchased }}\n                    user={loggedInUser}\n                />\n            </div>\n            <div className={classes.button}>\n                <Button onClick={onCancel} variant=\"contained\" color=\"secondary\" size=\"large\" style={{ marginRight: 20 }}>\n                    Cancel\n                </Button>\n                <Button disabled={formIsDisabled} onClick={updatePet} type=\"submit\" variant=\"contained\" color=\"primary\" size=\"large\">\n                    {buttonLoading ? <CircularProgress size={20} style={{ marginRight: 10, color: 'white' }} /> : ''} Save\n                </Button>\n            </div>\n        </div>\n    ) : (\n        <Loading />\n    );\n};\n\nconst useStyles = makeStyles((theme) => ({\n    layout: {\n        display: 'flex',\n        width: '100%',\n        justifyContent: 'center',\n        [theme.breakpoints.down('sm')]: {\n            flexDirection: 'column',\n            width: 'auto',\n            alignItems: 'center',\n        },\n    },\n    button: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n        marginRight: 20,\n        marginBottom: 25,\n        marginTop: -25,\n    },\n}));\n\n\n// connect() establishes the connection to the redux functionalities\nexport default connect()(EditPetView);\n"]},"metadata":{},"sourceType":"module"}
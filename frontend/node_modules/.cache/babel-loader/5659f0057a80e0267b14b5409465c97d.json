{"ast":null,"code":"import _toConsumableArray from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"index\"],_excluded2=[\"title\",\"focused\",\"editable\",\"children\",\"dataIndex\",\"record\",\"handleSave\"];import React,{createContext,useContext,useEffect,useRef,useState}from'react';import moment from'moment';import{connect,useDispatch}from'react-redux';// antd imports\nimport'antd/dist/antd.css';import{DatePicker,Modal,Popconfirm,Table,Typography}from'antd';import{Input,Form}from'antd';// material-ui imports\nimport{makeStyles}from'@material-ui/core/styles';import{Button,Grid,IconButton}from'@material-ui/core';import DeleteOutlinedIcon from'@material-ui/icons/DeleteOutlined';// components import\nimport DocumentsUpload from'./upload/documents.upload';// redux imports\nimport{updateCompetitionsToUpload}from'redux/actions';import{usePet,usePetCompetitions}from'helper/hooks/pets.hooks';// services import\nimport{NotificationService}from'services';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Text=Typography.Text;var EditableContext=/*#__PURE__*/createContext(null);var DATE_FORMAT='DD.MM.YYYY';// Define editable row form\nvar EditableRow=function EditableRow(_ref){var index=_ref.index,props=_objectWithoutProperties(_ref,_excluded);var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];return/*#__PURE__*/_jsx(Form,{form:form,component:false,children:/*#__PURE__*/_jsx(EditableContext.Provider,{value:form,children:/*#__PURE__*/_jsx(\"tr\",_objectSpread({},props))})});};// Define editable cell\nvar EditableCell=function EditableCell(_ref2){var title=_ref2.title,focused=_ref2.focused,editable=_ref2.editable,children=_ref2.children,dataIndex=_ref2.dataIndex,record=_ref2.record,handleSave=_ref2.handleSave,restProps=_objectWithoutProperties(_ref2,_excluded2);var _useState=useState(focused||false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var inputRef=useRef(null);var form=useContext(EditableContext);// focus on editing cell\nuseEffect(function(){if(editing){inputRef.current.focus();}},[editing]);var toggleEdit=function toggleEdit(){setEditing(!editing);form.setFieldsValue(_defineProperty({},dataIndex,record[dataIndex]));};// save edited values\nvar save=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var values;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return form.validateFields();case 3:values=_context.sent;toggleEdit();handleSave(_objectSpread(_objectSpread({},record),values));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);handleSave(_objectSpread(_objectSpread({},record),_context.t0.values));case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function save(){return _ref3.apply(this,arguments);};}();var childNode=children;if(editable){childNode=editing?/*#__PURE__*/_jsx(Form.Item,{style:{margin:0},name:dataIndex,rules:[{required:true,message:\"\".concat(title,\" is required.\")}],children:/*#__PURE__*/_jsx(Input,{ref:inputRef,onPressEnter:save,onBlur:save})}):/*#__PURE__*/_jsx(\"div\",{className:\"editable-cell-value-wrap\",style:{paddingRight:24},onClick:toggleEdit,children:children});}return/*#__PURE__*/_jsx(\"td\",_objectSpread(_objectSpread({},restProps),{},{children:childNode}));};var prepareCompetitions=function prepareCompetitions(competitions){var arr=competitions;arr.map(function(value,index){value.key=index;value.date=new Date(value.date);return value;});return arr;};var CompetitionsComponent=function CompetitionsComponent(props){var classes=useStyles();var dispatch=useDispatch();var mode=props.mode;var pet=usePet();var competitionsData=usePetCompetitions();var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isModalVisible=_useState6[0],setIsModalVisible=_useState6[1];// competitions on the modal\nvar _useState7=useState(mode==='add'?[]:prepareCompetitions(pet.competitions)),_useState8=_slicedToArray(_useState7,2),competitions=_useState8[0],setCompetitions=_useState8[1];// competitions on the edit page\nvar _useState9=useState(mode==='add'?[]:prepareCompetitions(pet.competitions)),_useState10=_slicedToArray(_useState9,2),editedCompetitions=_useState10[0],setEditedCompetitions=_useState10[1];var columnsData=[{title:'Name',dataIndex:'name',key:'name',fixed:'left',width:'auto',editable:true,render:function render(_,record){return competitions.length>=1?/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:record.name}):null;}},{title:'Date',dataIndex:'date',editable:false,render:function render(_,record){return competitions.length>=1?/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:new Date(record.date).toLocaleDateString('de-DE')}):null;}},{title:'Category',dataIndex:'category',key:'category',editable:true,render:function render(_,record){return competitions.length>=1?/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:record.category}):null;}},{title:'Prize',dataIndex:'prize',key:'prize',editable:true,render:function render(_,record){return competitions.length>=1?/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:record.prize}):null;}},{title:'Certificate',dataIndex:'certificate',key:'certificate',render:function render(_,record){return competitions.length>=1?/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:record.certificate?record.certificate.name:' No File Uploaded'}):null;}}];// columns data for the competitions in the modal\nvar columnsModalData=[{title:'Name',dataIndex:'name',key:'name',fixed:'left',width:'auto',editable:true,render:function render(_,record){return competitions.length>=1?/*#__PURE__*/_jsx(Input,{bordered:false,value:record.name}):null;}},{title:'Date',dataIndex:'date',editable:false,render:function render(_,record){return competitions.length>=1?/*#__PURE__*/_jsx(DatePicker,{defaultValue:moment(new Date(),DATE_FORMAT),value:moment(record.date,DATE_FORMAT),bordered:false,onChange:function onChange(date){return changeDate(date,record);},format:DATE_FORMAT}):null;}},{title:'Category',dataIndex:'category',key:'category',editable:true,render:function render(_,record){return competitions.length>=1?/*#__PURE__*/_jsx(Input,{bordered:false,value:record.category}):null;}},{title:'Prize',dataIndex:'prize',key:'prize',editable:true,render:function render(_,record){return competitions.length>=1?/*#__PURE__*/_jsx(Input,{bordered:false,value:record.prize}):null;}},{title:'Certificate',dataIndex:'certificate',key:'certificate',render:function render(_,record){return competitions.length>=1?/*#__PURE__*/_jsx(DocumentsUpload,{type:\"competitions\",competitionId:record.key,maxFiles:1,size:'small'}):null;}},{title:'Remove',key:'remove',render:function render(key){return competitions.length>=1?/*#__PURE__*/_jsx(Popconfirm,{title:\"Sure to delete?\",onConfirm:function onConfirm(){return handleDelete(key);},children:/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(DeleteOutlinedIcon,{color:\"error\"})})}):null;}}];var components={body:{row:EditableRow,cell:EditableCell}};var columns=columnsModalData.map(function(col){if(!col.editable){return col;}return _objectSpread(_objectSpread({},col),{},{onCell:function onCell(record){return{record:record,editable:col.editable,dataIndex:col.dataIndex,title:col.title,handleSave:handleSave,focused:col.key==='name'&&record.name===''?true:false};}});});// add new row\nvar handleAdd=function handleAdd(){var newData={key:count,name:'',date:new Date(),category:'',prize:'',certificate:undefined};setCompetitions([].concat(_toConsumableArray(competitions),[newData]));setCount(count+1);dispatch(updateCompetitionsToUpload([].concat(_toConsumableArray(competitions),[newData])));};// delete row\nvar handleDelete=function handleDelete(key){var newData=competitions.filter(function(item){return item.key!==key.key;});setCompetitions(newData);setCount(count-1);dispatch(updateCompetitionsToUpload(newData));};// save competitions data\nvar handleSave=function handleSave(row){var newData=_toConsumableArray(competitions);var index=newData.findIndex(function(item){return row.key===item.key;});var item=newData[index];newData.splice(index,1,_objectSpread(_objectSpread({},item),row));setCompetitions(newData);dispatch(updateCompetitionsToUpload(newData));};// handle change of the competition date\nvar changeDate=function changeDate(date,record){var newData=_toConsumableArray(competitions);newData.map(function(item){if(record.key===item.key){if(date===null){item.date=new Date();}else{item.date=new Date(date);}}return item;});setCompetitions(newData);dispatch(updateCompetitionsToUpload(newData));};var showModal=function showModal(){return setIsModalVisible(true);};var checkIfVerified=function checkIfVerified(){// check if all columns of all competitions are filled out\nvar verified=true;var isEmpty=function isEmpty(c){return c.name===''||c.prize===''||c.date===''||c.category===''||c.certificate===undefined||c.certificate==={};};competitionsData.forEach(function(item){if(isEmpty(item)){verified=false;return;}});return verified;};var hideModal=function hideModal(){if(competitionsData.length>0&&!checkIfVerified()){NotificationService.notify('error','All fields required','Please fill out all columns for the competitions!');}else{dispatch(updateCompetitionsToUpload(editedCompetitions));setCompetitions(editedCompetitions);setIsModalVisible(false);setCount(editedCompetitions.length);}};var onOk=function onOk(){if(checkIfVerified()){dispatch(updateCompetitionsToUpload(competitions));setEditedCompetitions(competitions);setIsModalVisible(false);setCount(competitions.length);}else{NotificationService.notify('error','All fields required','Please fill out all columns for the competitions!');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Grid,{container:true,className:classes.layout,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(\"label\",{className:classes.label,children:\"Competitions\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,className:classes.grid,children:/*#__PURE__*/_jsx(Button,{onClick:showModal,variant:\"outlined\",color:\"primary\",style:{margin:10},children:\"Edit Competitions\"})})]}),/*#__PURE__*/_jsx(Table,{dataSource:editedCompetitions,columns:columnsData}),/*#__PURE__*/_jsxs(Modal,{visible:isModalVisible,onOk:onOk,onCancel:hideModal,className:classes.modal,width:'80vw',children:[/*#__PURE__*/_jsx(Grid,{container:true,alignItems:\"flex-end\",justify:\"flex-end\",children:/*#__PURE__*/_jsx(Button,{onClick:handleAdd,variant:\"outlined\",color:\"primary\",style:{margin:20},children:\"Add a row\"})}),/*#__PURE__*/_jsx(Table,{components:components,rowClassName:function rowClassName(){return'editable-row';},bordered:true,dataSource:competitions,columns:columns,style:{width:'80vw'}})]})]});};var useStyles=makeStyles(function(theme){return{layout:{display:'flex',width:'100%',flexDirection:'row',justifyContent:'center',alignItems:'center'},label:{fontSize:20,fontWeight:300},grid:{display:'flex',justifyContent:'flex-end',alignSelf:'flex-end'},modal:{display:'flex',alignItems:'center',justifyContent:'center',marginTop:100}};});export default connect()(CompetitionsComponent);","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/components/competitions.js"],"names":["React","createContext","useContext","useEffect","useRef","useState","moment","connect","useDispatch","DatePicker","Modal","Popconfirm","Table","Typography","Input","Form","makeStyles","Button","Grid","IconButton","DeleteOutlinedIcon","DocumentsUpload","updateCompetitionsToUpload","usePet","usePetCompetitions","NotificationService","Text","EditableContext","DATE_FORMAT","EditableRow","index","props","useForm","form","EditableCell","title","focused","editable","children","dataIndex","record","handleSave","restProps","editing","setEditing","inputRef","current","focus","toggleEdit","setFieldsValue","save","validateFields","values","childNode","margin","required","message","paddingRight","prepareCompetitions","competitions","arr","map","value","key","date","Date","CompetitionsComponent","classes","useStyles","dispatch","mode","pet","competitionsData","count","setCount","isModalVisible","setIsModalVisible","setCompetitions","editedCompetitions","setEditedCompetitions","columnsData","fixed","width","render","_","length","name","toLocaleDateString","category","prize","certificate","columnsModalData","changeDate","handleDelete","components","body","row","cell","columns","col","onCell","handleAdd","newData","undefined","filter","item","findIndex","splice","showModal","checkIfVerified","verified","isEmpty","c","forEach","hideModal","notify","onOk","layout","label","grid","modal","theme","display","flexDirection","justifyContent","alignItems","fontSize","fontWeight","alignSelf","marginTop"],"mappings":"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","sourcesContent":["import React, { createContext, useContext, useEffect, useRef, useState } from 'react';\nimport moment from 'moment';\nimport { connect, useDispatch } from 'react-redux';\n// antd imports\nimport 'antd/dist/antd.css';\nimport { DatePicker, Modal, Popconfirm, Table, Typography } from 'antd';\nimport { Input, Form } from 'antd';\n// material-ui imports\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, Grid, IconButton } from '@material-ui/core';\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\n// components import\nimport DocumentsUpload from './upload/documents.upload';\n// redux imports\nimport { updateCompetitionsToUpload } from 'redux/actions';\nimport { usePet, usePetCompetitions } from 'helper/hooks/pets.hooks';\n// services import\nimport { NotificationService } from 'services';\n\nconst { Text } = Typography;\n\nconst EditableContext = createContext(null);\nconst DATE_FORMAT = 'DD.MM.YYYY';\n\n// Define editable row form\nconst EditableRow = ({ index, ...props }) => {\n    const [form] = Form.useForm();\n    return (\n        <Form form={form} component={false}>\n            <EditableContext.Provider value={form}>\n                <tr {...props} />\n            </EditableContext.Provider>\n        </Form>\n    );\n};\n\n// Define editable cell\nconst EditableCell = ({ title, focused, editable, children, dataIndex, record, handleSave, ...restProps }) => {\n    const [editing, setEditing] = useState(focused || false);\n    const inputRef = useRef(null);\n    const form = useContext(EditableContext);\n\n    // focus on editing cell\n    useEffect(() => {\n        if (editing) {\n            inputRef.current.focus();\n        }\n    }, [editing]);\n\n    const toggleEdit = () => {\n        setEditing(!editing);\n        form.setFieldsValue({\n            [dataIndex]: record[dataIndex],\n        });\n    };\n\n    // save edited values\n    const save = async () => {\n        try {\n            const values = await form.validateFields();\n            toggleEdit();\n            handleSave({ ...record, ...values });\n        } catch (errInfo) {\n            handleSave({ ...record, ...errInfo.values });\n        }\n    };\n\n    let childNode = children;\n\n    if (editable) {\n        childNode = editing ? (\n            <Form.Item\n                style={{\n                    margin: 0,\n                }}\n                name={dataIndex}\n                rules={[\n                    {\n                        required: true,\n                        message: `${title} is required.`,\n                    },\n                ]}\n            >\n                <Input ref={inputRef} onPressEnter={save} onBlur={save} />\n            </Form.Item>\n        ) : (\n            <div\n                className=\"editable-cell-value-wrap\"\n                style={{\n                    paddingRight: 24,\n                }}\n                onClick={toggleEdit}\n            >\n                {children}\n            </div>\n        );\n    }\n\n    return <td {...restProps}>{childNode}</td>;\n};\n\nconst prepareCompetitions = (competitions) => {\n    let arr = competitions;\n    arr.map((value, index) => {\n        value.key = index;\n        value.date = new Date(value.date);\n        return value;\n    });\n    return arr;\n};\n\nconst CompetitionsComponent = (props) => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const { mode } = props;\n\n    const pet = usePet();\n    const competitionsData = usePetCompetitions();\n\n    const [count, setCount] = useState(0);\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    // competitions on the modal\n    const [competitions, setCompetitions] = useState(mode === 'add' ? [] : prepareCompetitions(pet.competitions));\n    // competitions on the edit page\n    const [editedCompetitions, setEditedCompetitions] = useState(mode === 'add' ? [] : prepareCompetitions(pet.competitions));\n\n    const columnsData = [\n        {\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            fixed: 'left',\n            width: 'auto',\n            editable: true,\n            render: (_, record) => (competitions.length >= 1 ? <Text type=\"secondary\">{record.name}</Text> : null),\n        },\n        {\n            title: 'Date',\n            dataIndex: 'date',\n            editable: false,\n            render: (_, record) => (competitions.length >= 1 ? <Text type=\"secondary\">{new Date(record.date).toLocaleDateString('de-DE')}</Text> : null),\n        },\n        {\n            title: 'Category',\n            dataIndex: 'category',\n            key: 'category',\n            editable: true,\n            render: (_, record) => (competitions.length >= 1 ? <Text type=\"secondary\">{record.category}</Text> : null),\n        },\n        {\n            title: 'Prize',\n            dataIndex: 'prize',\n            key: 'prize',\n            editable: true,\n            render: (_, record) => (competitions.length >= 1 ? <Text type=\"secondary\">{record.prize}</Text> : null),\n        },\n        {\n            title: 'Certificate',\n            dataIndex: 'certificate',\n            key: 'certificate',\n            render: (_, record) => (competitions.length >= 1 ? <Text type=\"secondary\">{record.certificate ? record.certificate.name : ' No File Uploaded'}</Text> : null),\n        },\n    ];\n\n    // columns data for the competitions in the modal\n    const columnsModalData = [\n        {\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            fixed: 'left',\n            width: 'auto',\n            editable: true,\n            render: (_, record) => (competitions.length >= 1 ? <Input bordered={false} value={record.name} /> : null),\n        },\n        {\n            title: 'Date',\n            dataIndex: 'date',\n            editable: false,\n            render: (_, record) =>\n                competitions.length >= 1 ? (\n                    <DatePicker\n                        defaultValue={moment(new Date(), DATE_FORMAT)}\n                        value={moment(record.date, DATE_FORMAT)}\n                        bordered={false}\n                        onChange={(date) => changeDate(date, record)}\n                        format={DATE_FORMAT}\n                    />\n                ) : null,\n        },\n        {\n            title: 'Category',\n            dataIndex: 'category',\n            key: 'category',\n            editable: true,\n            render: (_, record) => (competitions.length >= 1 ? <Input bordered={false} value={record.category} /> : null),\n        },\n        {\n            title: 'Prize',\n            dataIndex: 'prize',\n            key: 'prize',\n            editable: true,\n            render: (_, record) => (competitions.length >= 1 ? <Input bordered={false} value={record.prize} /> : null),\n        },\n        {\n            title: 'Certificate',\n            dataIndex: 'certificate',\n            key: 'certificate',\n            render: (_, record) => (competitions.length >= 1 ? <DocumentsUpload type=\"competitions\" competitionId={record.key} maxFiles={1} size={'small'} /> : null),\n        },\n        {\n            title: 'Remove',\n            key: 'remove',\n            render: (key) =>\n                competitions.length >= 1 ? (\n                    <Popconfirm title=\"Sure to delete?\" onConfirm={() => handleDelete(key)}>\n                        <IconButton>\n                            <DeleteOutlinedIcon color=\"error\" />\n                        </IconButton>\n                    </Popconfirm>\n                ) : null,\n        },\n    ];\n\n    const components = {\n        body: {\n            row: EditableRow,\n            cell: EditableCell,\n        },\n    };\n\n    const columns = columnsModalData.map((col) => {\n        if (!col.editable) {\n            return col;\n        }\n\n        return {\n            ...col,\n            onCell: (record) => ({\n                record,\n                editable: col.editable,\n                dataIndex: col.dataIndex,\n                title: col.title,\n                handleSave: handleSave,\n                focused: col.key === 'name' && record.name === '' ? true : false,\n            }),\n        };\n    });\n\n    // add new row\n    const handleAdd = () => {\n        const newData = { key: count, name: '', date: new Date(), category: '', prize: '', certificate: undefined };\n        setCompetitions([...competitions, newData]);\n        setCount(count + 1);\n\n        dispatch(updateCompetitionsToUpload([...competitions, newData]));\n    };\n\n    // delete row\n    const handleDelete = (key) => {\n        const newData = competitions.filter((item) => item.key !== key.key);\n        setCompetitions(newData);\n        setCount(count - 1);\n\n        dispatch(updateCompetitionsToUpload(newData));\n    };\n\n    // save competitions data\n    const handleSave = (row) => {\n        const newData = [...competitions];\n        const index = newData.findIndex((item) => row.key === item.key);\n        const item = newData[index];\n        newData.splice(index, 1, { ...item, ...row });\n        setCompetitions(newData);\n\n        dispatch(updateCompetitionsToUpload(newData));\n    };\n\n    // handle change of the competition date\n    const changeDate = (date, record) => {\n        const newData = [...competitions];\n        newData.map((item) => {\n            if (record.key === item.key) {\n                if (date === null) {\n                    item.date = new Date();\n                } else {\n                    item.date = new Date(date);\n                }\n            }\n            return item;\n        });\n        setCompetitions(newData);\n\n        dispatch(updateCompetitionsToUpload(newData));\n    };\n\n    const showModal = () => setIsModalVisible(true);\n\n    const checkIfVerified = () => {\n        // check if all columns of all competitions are filled out\n        let verified = true;\n        const isEmpty = (c) => c.name === '' || c.prize === '' || c.date === '' || c.category === '' || c.certificate === undefined || c.certificate === {};\n        competitionsData.forEach((item) => {\n            if (isEmpty(item)) {\n                verified = false;\n                return;\n            }\n        });\n        return verified;\n    };\n\n    const hideModal = () => {\n        if (competitionsData.length > 0 && !checkIfVerified()) {\n            NotificationService.notify('error', 'All fields required', 'Please fill out all columns for the competitions!');\n        } else {\n            dispatch(updateCompetitionsToUpload(editedCompetitions));\n            setCompetitions(editedCompetitions);\n            setIsModalVisible(false);\n            setCount(editedCompetitions.length);\n        }\n    };\n\n    const onOk = () => {\n        if (checkIfVerified()) {\n            dispatch(updateCompetitionsToUpload(competitions));\n            setEditedCompetitions(competitions);\n            setIsModalVisible(false);\n            setCount(competitions.length);\n        } else {\n            NotificationService.notify('error', 'All fields required', 'Please fill out all columns for the competitions!');\n        }\n    };\n\n    return (\n        <div>\n            <Grid container className={classes.layout}>\n                <Grid item xs={12} sm={6}>\n                    <label className={classes.label}>Competitions</label>\n                </Grid>\n                <Grid item xs={12} sm={6} className={classes.grid}>\n                    <Button\n                        onClick={showModal}\n                        variant=\"outlined\"\n                        color=\"primary\"\n                        style={{\n                            margin: 10,\n                        }}\n                    >\n                        Edit Competitions\n                    </Button>\n                </Grid>\n            </Grid>\n            <Table dataSource={editedCompetitions} columns={columnsData} />\n            {/* Modal for editable competitions table */}\n            <Modal visible={isModalVisible} onOk={onOk} onCancel={hideModal} className={classes.modal} width={'80vw'}>\n                <Grid container alignItems=\"flex-end\" justify=\"flex-end\">\n                    <Button\n                        onClick={handleAdd}\n                        variant=\"outlined\"\n                        color=\"primary\"\n                        style={{\n                            margin: 20,\n                        }}\n                    >\n                        Add a row\n                    </Button>\n                </Grid>\n                <Table components={components} rowClassName={() => 'editable-row'} bordered dataSource={competitions} columns={columns} style={{ width: '80vw' }} />\n            </Modal>\n        </div>\n    );\n};\n\nconst useStyles = makeStyles((theme) => ({\n    layout: {\n        display: 'flex',\n        width: '100%',\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    label: {\n        fontSize: 20,\n        fontWeight: 300,\n    },\n    grid: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n        alignSelf: 'flex-end',\n    },\n    modal: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginTop: 100,\n    },\n}));\n\nexport default connect()(CompetitionsComponent);\n"]},"metadata":{},"sourceType":"module"}
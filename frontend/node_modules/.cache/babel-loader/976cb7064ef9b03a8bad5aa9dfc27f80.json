{"ast":null,"code":"import _slicedToArray from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Button}from'@material-ui/core';import{useSelector}from'react-redux';import{makeStyles}from'@material-ui/core/styles';import{useHistory}from'react-router-dom';import ShoppingCartIcon from'@material-ui/icons/ShoppingCart';import SendIcon from'@material-ui/icons/Send';import PaymentStepper from'./transactions/PaymentStepper';import{Modal}from'antd';import{useLoggedInUser}from'helper/hooks/auth.hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{button:{margin:theme.spacing(3),padding:theme.spacing(1),paddingLeft:theme.spacing(6),paddingRight:theme.spacing(6)},modal:{minWidth:'60vw',maxWidth:'80vw',width:'auto',borderRadius:25}};});function PaymentButton(_ref){var pet=_ref.pet;var classes=useStyles();var price=pet.price;var loggedInUser=useLoggedInUser();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isModalOpened=_useState2[0],setIsModalOpened=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isMyPet=_useState4[0],setIsMyPet=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),wasPurchased=_useState6[0],setWasPurchased=_useState6[1];useEffect(function(){if(loggedInUser){setIsMyPet(loggedInUser._id===pet.ownerId);setWasPurchased(pet.purchased);}},[loggedInUser,pet.ownerId,pet.purchased]);var openStepper=function openStepper(){return setIsModalOpened(true);};var closeModal=function closeModal(){return setIsModalOpened(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{disabled:isMyPet||wasPurchased,variant:\"contained\",color:\"primary\",className:classes.button,endIcon:/*#__PURE__*/_jsx(ShoppingCartIcon,{}),onClick:openStepper,children:wasPurchased?'Was Purchased':price===0||price===null?'Free':\"\".concat(price,\" \\u20AC\")}),/*#__PURE__*/_jsx(Modal,{title:\"Payment Confirmation\",visible:isModalOpened,onCancel:closeModal,className:classes.modal,footer:null,children:/*#__PURE__*/_jsx(PaymentStepper,{pet:pet,close:closeModal})})]});}export default PaymentButton;function ContactButton(contactProps){var classes=useStyles();var history=useHistory();var user=useSelector(function(state){return state.user;});var handleContact=function handleContact(id){history.push('/messenger/'+contactProps.breederId+'/'+contactProps.petId);};return/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",className:classes.button,endIcon:/*#__PURE__*/_jsx(SendIcon,{}),onClick:function onClick(){return handleContact();},disabled:user.user.subscriptionPlan==='free',children:\"Contact Owner\"});}export{PaymentButton,ContactButton};","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/components/Button.js"],"names":["React","useEffect","useState","Button","useSelector","makeStyles","useHistory","ShoppingCartIcon","SendIcon","PaymentStepper","Modal","useLoggedInUser","useStyles","theme","button","margin","spacing","padding","paddingLeft","paddingRight","modal","minWidth","maxWidth","width","borderRadius","PaymentButton","pet","classes","price","loggedInUser","isModalOpened","setIsModalOpened","isMyPet","setIsMyPet","wasPurchased","setWasPurchased","_id","ownerId","purchased","openStepper","closeModal","ContactButton","contactProps","history","user","state","handleContact","id","push","breederId","petId","subscriptionPlan"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Button } from '@material-ui/core';\r\nimport { useSelector } from 'react-redux';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useHistory } from 'react-router-dom';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport PaymentStepper from './transactions/PaymentStepper';\r\nimport { Modal } from 'antd';\r\nimport { useLoggedInUser } from 'helper/hooks/auth.hooks';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    button: {\r\n        margin: theme.spacing(3),\r\n        padding: theme.spacing(1),\r\n        paddingLeft: theme.spacing(6),\r\n        paddingRight: theme.spacing(6),\r\n    },\r\n    modal: {\r\n        minWidth: '60vw',\r\n        maxWidth: '80vw',\r\n        width: 'auto',\r\n        borderRadius: 25,\r\n    },\r\n}));\r\n\r\nfunction PaymentButton({ pet }) {\r\n    const classes = useStyles();\r\n    const price = pet.price;\r\n    const loggedInUser = useLoggedInUser();\r\n\r\n    const [isModalOpened, setIsModalOpened] = useState(false);\r\n    const [isMyPet, setIsMyPet] = useState(false);\r\n    const [wasPurchased, setWasPurchased] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (loggedInUser) {\r\n            setIsMyPet(loggedInUser._id === pet.ownerId);\r\n            setWasPurchased(pet.purchased);\r\n        }\r\n    }, [loggedInUser, pet.ownerId, pet.purchased]);\r\n\r\n    const openStepper = () => setIsModalOpened(true);\r\n    const closeModal = () => setIsModalOpened(false);\r\n\r\n    return (\r\n        <>\r\n            <Button disabled={isMyPet || wasPurchased} variant=\"contained\" color=\"primary\" className={classes.button} endIcon={<ShoppingCartIcon />} onClick={openStepper}>\r\n                {wasPurchased ? 'Was Purchased' : price === 0 || price === null ? 'Free' : `${price} â‚¬`}\r\n            </Button>\r\n            <Modal title=\"Payment Confirmation\" visible={isModalOpened} onCancel={closeModal} className={classes.modal} footer={null}>\r\n                <PaymentStepper pet={pet} close={closeModal} />\r\n            </Modal>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default PaymentButton;\r\n\r\nfunction ContactButton(contactProps) {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n    const user = useSelector((state) => state.user);\r\n    const handleContact = (id) => {\r\n        history.push('/messenger/' + contactProps.breederId + '/' + contactProps.petId);\r\n    };\r\n\r\n    return (\r\n        <Button variant=\"contained\" color=\"primary\" className={classes.button} endIcon={<SendIcon />} onClick={() => handleContact()} disabled={user.user.subscriptionPlan === 'free'}>\r\n            Contact Owner\r\n        </Button>\r\n    );\r\n}\r\n\r\nexport { PaymentButton, ContactButton };\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/alinaturbina/Uni Projects/seba/frontend/src/views/EditPetView.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { connect, useDispatch } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, CircularProgress } from '@material-ui/core';\nimport { useHistory, useLocation } from 'react-router-dom'; // components import\n\nimport { PetInformationForm, PetPhotosForm } from 'components/forms';\nimport Loading from 'components/Loading'; // state imports\n\nimport { usePet, usePetCompetitions, usePetDocuments, usePetPictures, usePetProfilePictureToRemove, usePetProfilePictureToUpload } from 'helper/hooks/pets.hooks';\nimport { changePet, getPet, updateCompetitionsToUpload, updateDocumentsToUpload, updatePicturesToUpload, updateProfilePicture, getUserPets } from 'redux/actions'; // helpers import\n\nimport { useUser } from 'helper/hooks/auth.hooks';\nimport { UPLOAD_STATUS } from 'helper/types';\nimport { isObjEmpty } from 'helper/helpers'; // services import\n\nimport { NotificationService, FirebaseService } from 'services';\nimport { useLoggedInUser } from 'helper/hooks/auth.hooks';\n/**\n * \n * @param {*} props \n * Main view to edit/modify an existing pet\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditPetView = props => {\n  _s();\n\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const location = useLocation();\n  const id = location.pathname.split('/edit/pet/')[1];\n  const pet = usePet();\n  const user = useUser();\n  const loggedInUser = useLoggedInUser();\n  useEffect(() => {\n    // remove old profile picture\n    dispatch(updateProfilePicture({}));\n\n    if (pet === null || pet === void 0 ? void 0 : pet.officialName) {\n      setLoading(false);\n    } else {\n      const fetchPet = () => {\n        dispatch(getPet(id));\n        setLoading(false);\n      };\n\n      fetchPet();\n    }\n  }, [dispatch, id, pet === null || pet === void 0 ? void 0 : pet.officialName]); // get pet upload states\n\n  const petDocuments = usePetDocuments();\n  const petCompetitions = usePetCompetitions();\n  const petPictures = usePetPictures();\n  const petProfilePictureToUpload = usePetProfilePictureToUpload();\n  const petProfilePictureToRemove = usePetProfilePictureToRemove();\n  const [loading, setLoading] = useState(true);\n  const [buttonLoading, setButtonLoading] = useState(false);\n  const [formIsDisabled, setFormIsDisabled] = useState(false);\n  const [name, setName] = useState(pet.officialName);\n  const [nickname, setNickname] = useState(pet.nickname);\n  const [sex, setSex] = useState(pet.sex);\n  const [birthDate, setBirthDate] = useState(new Date(pet.birthDate));\n  const [species, setSpecies] = useState(pet.species);\n  const [breed, setBreed] = useState(pet.breed);\n  const [price, setPrice] = useState(pet.price);\n  const [purchased, setPurchased] = useState(pet.purchased);\n  useEffect(() => {\n    // update upload states\n    if (loading) {\n      dispatch(updateProfilePicture(pet.profilePicture, {}));\n      dispatch(updatePicturesToUpload(pet.pictures));\n      dispatch(updateCompetitionsToUpload(pet.competitions));\n      dispatch(updateDocumentsToUpload(pet.documents));\n    }\n\n    if (pet.officialName) {\n      setLoading(false);\n    } else {\n      const fetchPet = () => {\n        dispatch(getPet(id));\n        setLoading(false);\n      };\n\n      fetchPet();\n    }\n  }, [dispatch, id, pet.documents, pet.competitions, pet.profilePicture, pet.pictures, pet.officialName, loading]);\n\n  const isEmpty = str => str === '' || str === undefined;\n\n  useEffect(() => {\n    const disabled = isEmpty(name) || isObjEmpty(petProfilePictureToUpload) || isEmpty(sex) || isEmpty(species) || isEmpty(breed);\n    setFormIsDisabled(disabled);\n  }, [name, sex, breed, species, petProfilePictureToUpload]);\n  useEffect(() => {\n    if (pet.ownerId !== user.id) {\n      history.goBack();\n      NotificationService.notify('error', 'Navigation Error', 'This information is restricted');\n    }\n  }, [pet.ownerId, user.id, history]);\n\n  const uploadCompetitions = async () => {\n    const competitionsData = [...petCompetitions];\n\n    for (let index = 0; index < competitionsData.length; index++) {\n      let value = competitionsData[index];\n\n      if (value.certificate && Object.keys(value.certificate).length !== 0) {\n        if (value.certificate.status === UPLOAD_STATUS.UPLOAD) {\n          const metadata = {\n            contentType: value.certificate.type\n          };\n          let url = await FirebaseService.upload(value.certificate.path, value.certificate.data, metadata);\n          competitionsData[index].certificate.url = url;\n        }\n      } // check if there is something to delete\n\n\n      if (value.certificates && Object.keys(value.certificates).length !== 0) {\n        for (let y = 0; y < value.certificates.length; y++) {\n          let toDelete = value.certificates[y];\n          await FirebaseService.remove(toDelete.path);\n        }\n      }\n    }\n\n    let competitions = competitionsData.filter(value => value.certificate.status !== UPLOAD_STATUS.DELETE);\n    await dispatch(updateCompetitionsToUpload(competitions));\n    return competitions;\n  };\n\n  const uploadDocuments = async () => {\n    const documentsData = [...petDocuments];\n\n    for (let index = 0; index < documentsData.length; index++) {\n      let value = documentsData[index];\n\n      if (value.status === UPLOAD_STATUS.UPLOAD) {\n        const metadata = {\n          contentType: value.type\n        };\n        let url = await FirebaseService.upload(value.path, value.data, metadata);\n        documentsData[index].url = url;\n      } else if (value.status === UPLOAD_STATUS.DELETE) {\n        await FirebaseService.remove(value.path);\n      }\n    }\n\n    let docs = documentsData.filter(value => value.status !== UPLOAD_STATUS.DELETE);\n    await dispatch(updateDocumentsToUpload(docs));\n    return docs;\n  };\n\n  const uploadPictures = async () => {\n    const picturesData = [...petPictures];\n\n    for (let index = 0; index < picturesData.length; index++) {\n      let value = picturesData[index];\n\n      if (value.status === UPLOAD_STATUS.UPLOAD) {\n        const metadata = {\n          contentType: 'image/png'\n        };\n        let url = await FirebaseService.upload(value.path, value.data, metadata);\n        picturesData[index].src = url;\n      } else if (value.status === UPLOAD_STATUS.DELETE) {\n        await FirebaseService.remove(value.path);\n      }\n    }\n\n    const pics = picturesData.filter(value => value.status !== UPLOAD_STATUS.DELETE);\n    await dispatch(updatePicturesToUpload(pics));\n    return pics;\n  };\n\n  const uploadProfilePicture = async () => {\n    // update profile picture only if new was uploaded\n    if (Object.keys(petProfilePictureToRemove).length !== 0 && (petProfilePictureToRemove === null || petProfilePictureToRemove === void 0 ? void 0 : petProfilePictureToRemove.src) !== '') {\n      // delete old one\n      await FirebaseService.remove(petProfilePictureToRemove.path); // upload new one\n\n      let value = petProfilePictureToUpload;\n      const metadata = {\n        contentType: 'image/png'\n      };\n      let url = await FirebaseService.upload(value.path, value.data, metadata);\n      value.src = url;\n      await dispatch(updateProfilePicture(value, {}));\n      return value;\n    } else {\n      return pet.profilePicture;\n    }\n  };\n\n  const updatePet = async () => {\n    setButtonLoading(true); // upload documents and pics to firebase first\n\n    const documents = await uploadDocuments();\n    const competitions = await uploadCompetitions();\n    const pictures = await uploadPictures();\n    const profilePicture = await uploadProfilePicture();\n    const dateCreated = Date.now(); // combine all information about a pet\n\n    let petToUpload = {\n      id: id,\n      ownerId: user.id,\n      officialName: name,\n      nickname: nickname,\n      birthDate: birthDate,\n      sex: sex,\n      price: price,\n      profilePicture: profilePicture,\n      pictures: pictures,\n      dateCreated: dateCreated,\n      breed: breed,\n      species: species,\n      competitions: competitions,\n      documents: documents,\n      purchased: purchased\n    };\n\n    const onSuccess = () => {\n      NotificationService.notify('success', 'Success', 'Your four-legged friend was successfully updated!');\n      history.push('/'); // update pets of logged in user in redux store\n\n      dispatch(getUserPets(user.id));\n    };\n\n    const onError = () => {\n      NotificationService.notify('error', 'Error', 'There was a problem updating your pet.');\n    };\n\n    await dispatch(changePet(petToUpload, onSuccess, onError));\n    setButtonLoading(false);\n  }; // on canceling the view\n\n\n  const onCancel = async () => {\n    history.goBack();\n  };\n\n  return pet && !loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.layout,\n      children: [/*#__PURE__*/_jsxDEV(PetPhotosForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PetInformationForm, {\n        nameProp: {\n          name,\n          setName\n        },\n        nicknameProp: {\n          nickname,\n          setNickname\n        },\n        sexProp: {\n          sex,\n          setSex\n        },\n        birthDateProp: {\n          birthDate,\n          setBirthDate\n        },\n        speciesProp: {\n          species,\n          setSpecies\n        },\n        breedProp: {\n          breed,\n          setBreed\n        },\n        priceProp: {\n          price,\n          setPrice\n        },\n        disabledProp: {\n          formIsDisabled,\n          setFormIsDisabled\n        },\n        purchasedProp: {\n          purchased,\n          setPurchased\n        },\n        user: loggedInUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.button,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: onCancel,\n        variant: \"contained\",\n        color: \"secondary\",\n        size: \"large\",\n        style: {\n          marginRight: 20\n        },\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        disabled: formIsDisabled,\n        onClick: updatePet,\n        type: \"submit\",\n        variant: \"contained\",\n        color: \"primary\",\n        size: \"large\",\n        children: [buttonLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 20,\n          style: {\n            marginRight: 10,\n            color: 'white'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 38\n        }, this) : '', \" Save\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 9\n  }, this) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditPetView, \"bChZKbivhjNihBRujKaNk06xT4U=\", false, function () {\n  return [useStyles, useDispatch, useHistory, useLocation, usePet, useUser, useLoggedInUser, usePetDocuments, usePetCompetitions, usePetPictures, usePetProfilePictureToUpload, usePetProfilePictureToRemove];\n});\n\n_c = EditPetView;\nconst useStyles = makeStyles(theme => ({\n  layout: {\n    display: 'flex',\n    width: '100%',\n    justifyContent: 'center',\n    [theme.breakpoints.down('sm')]: {\n      flexDirection: 'column',\n      width: 'auto',\n      alignItems: 'center'\n    }\n  },\n  button: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    marginRight: 20\n  }\n})); // connect() establishes the connection to the redux functionalities\n\nexport default connect()(EditPetView);\n\nvar _c;\n\n$RefreshReg$(_c, \"EditPetView\");","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/views/EditPetView.js"],"names":["React","useEffect","useState","connect","useDispatch","makeStyles","Button","CircularProgress","useHistory","useLocation","PetInformationForm","PetPhotosForm","Loading","usePet","usePetCompetitions","usePetDocuments","usePetPictures","usePetProfilePictureToRemove","usePetProfilePictureToUpload","changePet","getPet","updateCompetitionsToUpload","updateDocumentsToUpload","updatePicturesToUpload","updateProfilePicture","getUserPets","useUser","UPLOAD_STATUS","isObjEmpty","NotificationService","FirebaseService","useLoggedInUser","EditPetView","props","classes","useStyles","dispatch","history","location","id","pathname","split","pet","user","loggedInUser","officialName","setLoading","fetchPet","petDocuments","petCompetitions","petPictures","petProfilePictureToUpload","petProfilePictureToRemove","loading","buttonLoading","setButtonLoading","formIsDisabled","setFormIsDisabled","name","setName","nickname","setNickname","sex","setSex","birthDate","setBirthDate","Date","species","setSpecies","breed","setBreed","price","setPrice","purchased","setPurchased","profilePicture","pictures","competitions","documents","isEmpty","str","undefined","disabled","ownerId","goBack","notify","uploadCompetitions","competitionsData","index","length","value","certificate","Object","keys","status","UPLOAD","metadata","contentType","type","url","upload","path","data","certificates","y","toDelete","remove","filter","DELETE","uploadDocuments","documentsData","docs","uploadPictures","picturesData","src","pics","uploadProfilePicture","updatePet","dateCreated","now","petToUpload","onSuccess","push","onError","onCancel","layout","button","marginRight","color","theme","display","width","justifyContent","breakpoints","down","flexDirection","alignItems"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect, useDispatch } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, CircularProgress } from '@material-ui/core';\nimport { useHistory, useLocation } from 'react-router-dom';\n// components import\nimport { PetInformationForm, PetPhotosForm } from 'components/forms';\nimport Loading from 'components/Loading';\n// state imports\nimport { usePet, usePetCompetitions, usePetDocuments, usePetPictures, usePetProfilePictureToRemove, usePetProfilePictureToUpload } from 'helper/hooks/pets.hooks';\nimport { changePet, getPet, updateCompetitionsToUpload, updateDocumentsToUpload, updatePicturesToUpload, updateProfilePicture, getUserPets } from 'redux/actions';\n// helpers import\nimport { useUser } from 'helper/hooks/auth.hooks';\nimport { UPLOAD_STATUS } from 'helper/types';\nimport { isObjEmpty } from 'helper/helpers';\n// services import\nimport { NotificationService, FirebaseService } from 'services';\nimport { useLoggedInUser } from 'helper/hooks/auth.hooks';\n\n/**\n * \n * @param {*} props \n * Main view to edit/modify an existing pet\n */\nconst EditPetView = (props) => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const location = useLocation();\n\n    const id = location.pathname.split('/edit/pet/')[1];\n    const pet = usePet();\n    const user = useUser();\n    const loggedInUser = useLoggedInUser();\n\n    useEffect(() => {\n        // remove old profile picture\n        dispatch(updateProfilePicture({}))\n\n        if (pet?.officialName) {\n            setLoading(false);\n        } else {\n            const fetchPet = () => {\n                dispatch(getPet(id));\n                setLoading(false);\n            };\n            fetchPet();\n        }\n\n    }, [dispatch, id, pet?.officialName]);\n    // get pet upload states\n    const petDocuments = usePetDocuments();\n    const petCompetitions = usePetCompetitions();\n    const petPictures = usePetPictures();\n    const petProfilePictureToUpload = usePetProfilePictureToUpload();\n    const petProfilePictureToRemove = usePetProfilePictureToRemove();\n\n    const [loading, setLoading] = useState(true);\n    const [buttonLoading, setButtonLoading] = useState(false);\n    const [formIsDisabled, setFormIsDisabled] = useState(false);\n    const [name, setName] = useState(pet.officialName);\n    const [nickname, setNickname] = useState(pet.nickname);\n    const [sex, setSex] = useState(pet.sex);\n    const [birthDate, setBirthDate] = useState(new Date(pet.birthDate));\n    const [species, setSpecies] = useState(pet.species);\n    const [breed, setBreed] = useState(pet.breed);\n    const [price, setPrice] = useState(pet.price);\n    const [purchased, setPurchased] = useState(pet.purchased);\n\n    useEffect(() => {\n        // update upload states\n        if (loading) {\n            dispatch(updateProfilePicture(pet.profilePicture, {}));\n            dispatch(updatePicturesToUpload(pet.pictures));\n            dispatch(updateCompetitionsToUpload(pet.competitions));\n            dispatch(updateDocumentsToUpload(pet.documents));\n        }\n\n        if (pet.officialName) {\n            setLoading(false);\n        } else {\n            const fetchPet = () => {\n                dispatch(getPet(id));\n                setLoading(false);\n            };\n            fetchPet();\n        }\n    }, [dispatch, id, pet.documents, pet.competitions, pet.profilePicture, pet.pictures, pet.officialName, loading]);\n\n    const isEmpty = (str) => str === '' || str === undefined;\n\n    useEffect(() => {\n        const disabled = isEmpty(name) || isObjEmpty(petProfilePictureToUpload) || isEmpty(sex) || isEmpty(species) || isEmpty(breed);\n        setFormIsDisabled(disabled);\n    }, [name, sex, breed, species, petProfilePictureToUpload]);\n\n    useEffect(() => {\n        if (pet.ownerId !== user.id) {\n            history.goBack();\n            NotificationService.notify('error', 'Navigation Error', 'This information is restricted');\n        }\n    }, [pet.ownerId, user.id, history]);\n\n    const uploadCompetitions = async () => {\n        const competitionsData = [...petCompetitions];\n        for (let index = 0; index < competitionsData.length; index++) {\n            let value = competitionsData[index];\n\n            if (value.certificate && Object.keys(value.certificate).length !== 0) {\n                if (value.certificate.status === UPLOAD_STATUS.UPLOAD) {\n                    const metadata = {\n                        contentType: value.certificate.type,\n                    };\n                    let url = await FirebaseService.upload(value.certificate.path, value.certificate.data, metadata);\n                    competitionsData[index].certificate.url = url;\n                }\n            }\n            // check if there is something to delete\n            if (value.certificates && Object.keys(value.certificates).length !== 0) {\n                for (let y = 0; y < value.certificates.length; y++) {\n                    let toDelete = value.certificates[y];\n                    await FirebaseService.remove(toDelete.path);\n                }\n            }\n        }\n\n        let competitions = competitionsData.filter((value) => value.certificate.status !== UPLOAD_STATUS.DELETE);\n        await dispatch(updateCompetitionsToUpload(competitions));\n\n        return competitions;\n    };\n\n    const uploadDocuments = async () => {\n        const documentsData = [...petDocuments];\n        for (let index = 0; index < documentsData.length; index++) {\n            let value = documentsData[index];\n\n            if (value.status === UPLOAD_STATUS.UPLOAD) {\n                const metadata = {\n                    contentType: value.type,\n                };\n                let url = await FirebaseService.upload(value.path, value.data, metadata);\n                documentsData[index].url = url;\n            } else if (value.status === UPLOAD_STATUS.DELETE) {\n                await FirebaseService.remove(value.path);\n            }\n        }\n\n        let docs = documentsData.filter((value) => value.status !== UPLOAD_STATUS.DELETE);\n        await dispatch(updateDocumentsToUpload(docs));\n\n        return docs;\n    };\n\n    const uploadPictures = async () => {\n        const picturesData = [...petPictures];\n        for (let index = 0; index < picturesData.length; index++) {\n            let value = picturesData[index];\n\n            if (value.status === UPLOAD_STATUS.UPLOAD) {\n                const metadata = {\n                    contentType: 'image/png',\n                };\n\n                let url = await FirebaseService.upload(value.path, value.data, metadata);\n                picturesData[index].src = url;\n            } else if (value.status === UPLOAD_STATUS.DELETE) {\n                await FirebaseService.remove(value.path);\n            }\n        }\n        const pics = picturesData.filter((value) => value.status !== UPLOAD_STATUS.DELETE);\n        await dispatch(updatePicturesToUpload(pics));\n\n        return pics;\n    };\n\n    const uploadProfilePicture = async () => {\n        // update profile picture only if new was uploaded\n        if (Object.keys(petProfilePictureToRemove).length !== 0 && petProfilePictureToRemove?.src !== '') {\n            // delete old one\n            await FirebaseService.remove(petProfilePictureToRemove.path);\n\n            // upload new one\n            let value = petProfilePictureToUpload;\n            const metadata = {\n                contentType: 'image/png',\n            };\n\n            let url = await FirebaseService.upload(value.path, value.data, metadata);\n            value.src = url;\n\n            await dispatch(updateProfilePicture(value, {}));\n\n            return value;\n        } else {\n            return pet.profilePicture;\n        }\n    };\n\n    const updatePet = async () => {\n        setButtonLoading(true);\n\n        // upload documents and pics to firebase first\n        const documents = await uploadDocuments();\n        const competitions = await uploadCompetitions();\n        const pictures = await uploadPictures();\n        const profilePicture = await uploadProfilePicture();\n\n        const dateCreated = Date.now();\n        // combine all information about a pet\n        let petToUpload = {\n            id: id,\n            ownerId: user.id,\n            officialName: name,\n            nickname: nickname,\n            birthDate: birthDate,\n            sex: sex,\n            price: price,\n            profilePicture: profilePicture,\n            pictures: pictures,\n            dateCreated: dateCreated,\n            breed: breed,\n            species: species,\n            competitions: competitions,\n            documents: documents,\n            purchased: purchased,\n        };\n\n        const onSuccess = () => {\n            NotificationService.notify('success', 'Success', 'Your four-legged friend was successfully updated!');\n            history.push('/');\n            // update pets of logged in user in redux store\n            dispatch(getUserPets(user.id));\n        };\n\n        const onError = () => {\n            NotificationService.notify('error', 'Error', 'There was a problem updating your pet.');\n        };\n\n        await dispatch(changePet(petToUpload, onSuccess, onError));\n        setButtonLoading(false);\n    };\n\n    // on canceling the view\n    const onCancel = async () => {\n        history.goBack();\n    };\n\n    return pet && !loading ? (\n        <div>\n            <div className={classes.layout}>\n                <PetPhotosForm />\n                <PetInformationForm\n                    nameProp={{ name, setName }}\n                    nicknameProp={{ nickname, setNickname }}\n                    sexProp={{ sex, setSex }}\n                    birthDateProp={{ birthDate, setBirthDate }}\n                    speciesProp={{ species, setSpecies }}\n                    breedProp={{ breed, setBreed }}\n                    priceProp={{ price, setPrice }}\n                    disabledProp={{ formIsDisabled, setFormIsDisabled }}\n                    purchasedProp={{ purchased, setPurchased }}\n                    user={loggedInUser}\n                />\n            </div>\n            <div className={classes.button}>\n                <Button onClick={onCancel} variant=\"contained\" color=\"secondary\" size=\"large\" style={{ marginRight: 20 }}>\n                    Cancel\n                </Button>\n                <Button disabled={formIsDisabled} onClick={updatePet} type=\"submit\" variant=\"contained\" color=\"primary\" size=\"large\">\n                    {buttonLoading ? <CircularProgress size={20} style={{ marginRight: 10, color: 'white' }} /> : ''} Save\n                </Button>\n            </div>\n        </div>\n    ) : (\n        <Loading />\n    );\n};\n\nconst useStyles = makeStyles((theme) => ({\n    layout: {\n        display: 'flex',\n        width: '100%',\n        justifyContent: 'center',\n        [theme.breakpoints.down('sm')]: {\n            flexDirection: 'column',\n            width: 'auto',\n            alignItems: 'center',\n        },\n    },\n    button: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n        marginRight: 20,\n    },\n}));\n\n\n// connect() establishes the connection to the redux functionalities\nexport default connect()(EditPetView);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from'react';import{withRouter}from'react-router-dom';import{connect,useDispatch,useSelector}from'react-redux';import{getUsersInfo,register,resetError,startLoading,stopLoading}from'../redux/actions';import NotificationService from'services/NotificationService';import SignUpPaper from'components/SignUpPaper';import{makeStyles}from'@material-ui/core';import logo from\"../images/breender.svg\";/**\n * For register new users\n * @param {props} props\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignUpView(props){var classes=useStyles();var user=useSelector(function(state){return state.user;});var dispatch=useDispatch();useEffect(function(){if(user.user){NotificationService.notify('success','Success','Account was successfully created! Please check your inbox for verification link.');props.history.push('/');props.dispatch(getUsersInfo(user.user.id));}if(user.error){setTimeout(function(){NotificationService.notify('error','Error','An error occured while creating an account. Please try again later.');},2000);//delay function to get fresh error\n}//reset errors when functional component unmounts\nreturn function(){props.dispatch(resetError());};},[user,props.history]);var onRegister=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,username,password,city,province,isAdmin,subscriptionPlan,paymentPlan,paymentMethod){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(startLoading());_context.next=3;return dispatch(register(email,username,password,city,province,isAdmin,subscriptionPlan,paymentPlan,paymentMethod));case 3:dispatch(stopLoading());case 4:case\"end\":return _context.stop();}}},_callee);}));return function onRegister(_x,_x2,_x3,_x4,_x5,_x6,_x7,_x8,_x9){return _ref.apply(this,arguments);};}();var onCancel=function onCancel(){props.history.push('/');};var goToHome=function goToHome(){return props.history.push('/');};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{onClick:goToHome,children:/*#__PURE__*/_jsx(\"img\",{alt:\"logo\",src:logo,className:classes.logo})}),/*#__PURE__*/_jsx(SignUpPaper,{user:user,onRegister:onRegister,onCancel:onCancel})]});}var useStyles=makeStyles(function(theme){return{logo:{position:'absolute',marginLeft:'auto',marginRight:'auto',left:0,right:0,top:35,maxWidth:280,maxHeight:'auto',cursor:'pointer'}};});export default connect()(withRouter(SignUpView));","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/views/SignUpView.js"],"names":["React","useEffect","withRouter","connect","useDispatch","useSelector","getUsersInfo","register","resetError","startLoading","stopLoading","NotificationService","SignUpPaper","makeStyles","SignUpView","props","classes","useStyles","user","state","dispatch","notify","history","push","id","error","setTimeout","onRegister","email","username","password","city","province","isAdmin","subscriptionPlan","paymentPlan","paymentMethod","onCancel","goToHome","logo","theme","position","marginLeft","marginRight","left","right","top","maxWidth","maxHeight","cursor"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect, useDispatch, useSelector } from 'react-redux';\nimport { getUsersInfo, register, resetError, startLoading, stopLoading } from '../redux/actions';\nimport NotificationService from 'services/NotificationService';\nimport SignUpPaper from 'components/SignUpPaper';\nimport { makeStyles } from '@material-ui/core';\nimport logo from '../images/breender.svg';\n\n/**\n * For register new users\n * @param {props} props\n */\nfunction SignUpView(props) {\n    const classes = useStyles();\n    const user = useSelector((state) => state.user);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (user.user) {\n            NotificationService.notify('success', 'Success', 'Account was successfully created! Please check your inbox for verification link.');\n            props.history.push('/');\n            props.dispatch(getUsersInfo(user.user.id));\n        }\n        if (user.error) {\n            setTimeout(function () {\n                NotificationService.notify('error', 'Error', 'An error occured while creating an account. Please try again later.');\n            }, 2000); //delay function to get fresh error\n        }\n        //reset errors when functional component unmounts\n        return () => {\n            props.dispatch(resetError());\n        };\n    }, [user, props.history]);\n\n    const onRegister = async (email, username, password, city, province, isAdmin, subscriptionPlan, paymentPlan, paymentMethod) => {\n        dispatch(startLoading());\n        await dispatch(register(email, username, password, city, province, isAdmin, subscriptionPlan, paymentPlan, paymentMethod));\n        dispatch(stopLoading());\n    };\n\n    const onCancel = () => {\n        props.history.push('/');\n    };\n\n    const goToHome = () => props.history.push('/');\n\n    return (\n        <>\n            <div onClick={goToHome}>\n                <img alt=\"logo\" src={logo} className={classes.logo} />\n            </div>\n            <SignUpPaper user={user} onRegister={onRegister} onCancel={onCancel} />\n        </>\n    );\n}\n\nconst useStyles = makeStyles((theme) => ({\n    logo: {\n        position: 'absolute',\n        marginLeft: 'auto',\n        marginRight: 'auto',\n        left: 0,\n        right: 0,\n        top: 35,\n        maxWidth: 280,\n        maxHeight: 'auto',\n        cursor: 'pointer',\n    },\n}));\n\nexport default connect()(withRouter(SignUpView));\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{format}from'timeago.js';import{makeStyles}from'@material-ui/core/styles';import{useSelector}from'react-redux';import{Grid,Paper,Divider,Typography,ListItem,ListItemAvatar,ListItemText,Avatar}from'@material-ui/core';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MessageComponent(props){var classes=useStyles();var userId=useSelector(function(state){return state.user.user.id;});var scrollRef=useRef();function getAlignment(){return props.message.sender===userId?'right':'left';}function getTimestamp(){return props.message.createdAt?format(props.message.createdAt):'just now';}var isToday=function isToday(someDate){var today=new Date();return someDate.getDate()==today.getDate()&&someDate.getMonth()==today.getMonth()&&someDate.getFullYear()==today.getFullYear();};useEffect(function(){var _scrollRef$current;(_scrollRef$current=scrollRef.current)===null||_scrollRef$current===void 0?void 0:_scrollRef$current.scrollIntoView({behavior:'smooth'});});return/*#__PURE__*/_jsx(ListItem,{ref:scrollRef,children:/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(ListItemText,{align:getAlignment(),primary:props.message.text})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(ListItemText,{align:getAlignment(),secondary:/*#__PURE__*/_jsx(Typography,{type:\"body3\",className:classes.timestamp,children:getTimestamp()})})})]})},props.message.id);}var useStyles=makeStyles(function(theme){return{timestamp:{color:theme.palette.primary.light},layout:{width:'80%',alignSelf:'center'}};});export default MessageComponent;","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/components/messenger/MessageComponent.js"],"names":["React","useEffect","useState","useRef","format","makeStyles","useSelector","Grid","Paper","Divider","Typography","ListItem","ListItemAvatar","ListItemText","Avatar","MessageComponent","props","classes","useStyles","userId","state","user","id","scrollRef","getAlignment","message","sender","getTimestamp","createdAt","isToday","someDate","today","Date","getDate","getMonth","getFullYear","current","scrollIntoView","behavior","text","timestamp","theme","color","palette","primary","light","layout","width","alignSelf"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,OAASC,MAAT,KAAuB,YAAvB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,IAAT,CAAeC,KAAf,CAAsBC,OAAtB,CAA+BC,UAA/B,CAA2CC,QAA3C,CAAqDC,cAArD,CAAqEC,YAArE,CAAmFC,MAAnF,KAAiG,mBAAjG,C,wFAEA,QAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAAiC,CAC7B,GAAMC,CAAAA,OAAO,CAAGC,SAAS,EAAzB,CACA,GAAMC,CAAAA,MAAM,CAAGb,WAAW,CAAC,SAACc,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAN,CAAWA,IAAX,CAAgBC,EAA3B,EAAD,CAA1B,CACA,GAAMC,CAAAA,SAAS,CAAGpB,MAAM,EAAxB,CAEA,QAASqB,CAAAA,YAAT,EAAwB,CACpB,MAAOR,CAAAA,KAAK,CAACS,OAAN,CAAcC,MAAd,GAAyBP,MAAzB,CAAkC,OAAlC,CAA4C,MAAnD,CACH,CAED,QAASQ,CAAAA,YAAT,EAAwB,CACpB,MAAOX,CAAAA,KAAK,CAACS,OAAN,CAAcG,SAAd,CAA0BxB,MAAM,CAACY,KAAK,CAACS,OAAN,CAAcG,SAAf,CAAhC,CAA4D,UAAnE,CACH,CAED,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,QAAD,CAAc,CAC1B,GAAMC,CAAAA,KAAK,CAAG,GAAIC,CAAAA,IAAJ,EAAd,CACA,MAAOF,CAAAA,QAAQ,CAACG,OAAT,IAAsBF,KAAK,CAACE,OAAN,EAAtB,EAAyCH,QAAQ,CAACI,QAAT,IAAuBH,KAAK,CAACG,QAAN,EAAhE,EAAoFJ,QAAQ,CAACK,WAAT,IAA0BJ,KAAK,CAACI,WAAN,EAArH,CACH,CAHD,CAKAlC,SAAS,CAAC,UAAM,wBACZ,oBAAAsB,SAAS,CAACa,OAAV,gEAAmBC,cAAnB,CAAkC,CAAEC,QAAQ,CAAE,QAAZ,CAAlC,EACH,CAFQ,CAAT,CAIA,mBACI,KAAC,QAAD,EAAiC,GAAG,CAAEf,SAAtC,uBACI,MAAC,IAAD,EAAM,SAAS,KAAf,wBACI,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,uBACI,KAAC,YAAD,EAAc,KAAK,CAAEC,YAAY,EAAjC,CAAqC,OAAO,CAAER,KAAK,CAACS,OAAN,CAAcc,IAA5D,EADJ,EADJ,cAII,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,uBACI,KAAC,YAAD,EACI,KAAK,CAAEf,YAAY,EADvB,CAEI,SAAS,cACL,KAAC,UAAD,EAAY,IAAI,CAAC,OAAjB,CAAyB,SAAS,CAAEP,OAAO,CAACuB,SAA5C,UACKb,YAAY,EADjB,EAHR,EADJ,EAJJ,GADJ,EAAeX,KAAK,CAACS,OAAN,CAAcH,EAA7B,CADJ,CAmBH,CAED,GAAMJ,CAAAA,SAAS,CAAGb,UAAU,CAAC,SAACoC,KAAD,QAAY,CACrCD,SAAS,CAAE,CACPE,KAAK,CAAED,KAAK,CAACE,OAAN,CAAcC,OAAd,CAAsBC,KADtB,CAD0B,CAIrCC,MAAM,CAAE,CACJC,KAAK,CAAE,KADH,CAEJC,SAAS,CAAE,QAFP,CAJ6B,CAAZ,EAAD,CAA5B,CAUA,cAAejC,CAAAA,gBAAf","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { format } from 'timeago.js';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSelector } from 'react-redux';\nimport { Grid, Paper, Divider, Typography, ListItem, ListItemAvatar, ListItemText, Avatar } from '@material-ui/core';\n\nfunction MessageComponent(props) {\n    const classes = useStyles();\n    const userId = useSelector((state) => state.user.user.id);\n    const scrollRef = useRef();\n\n    function getAlignment() {\n        return props.message.sender === userId ? 'right' : 'left';\n    }\n\n    function getTimestamp() {\n        return props.message.createdAt ? format(props.message.createdAt) : 'just now';\n    }\n\n    const isToday = (someDate) => {\n        const today = new Date();\n        return someDate.getDate() == today.getDate() && someDate.getMonth() == today.getMonth() && someDate.getFullYear() == today.getFullYear();\n    };\n\n    useEffect(() => {\n        scrollRef.current?.scrollIntoView({ behavior: 'smooth' });\n    });\n\n    return (\n        <ListItem key={props.message.id} ref={scrollRef}>\n            <Grid container>\n                <Grid item xs={12}>\n                    <ListItemText align={getAlignment()} primary={props.message.text} />\n                </Grid>\n                <Grid item xs={12}>\n                    <ListItemText\n                        align={getAlignment()}\n                        secondary={\n                            <Typography type=\"body3\" className={classes.timestamp}>\n                                {getTimestamp()}\n                            </Typography>\n                        }\n                    />\n                </Grid>\n            </Grid>\n        </ListItem>\n    );\n}\n\nconst useStyles = makeStyles((theme) => ({\n    timestamp: {\n        color: theme.palette.primary.light,\n    },\n    layout: {\n        width: '80%',\n        alignSelf: 'center',\n    },\n}));\n\nexport default MessageComponent;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"export var getAgeString=function getAgeString(age){var years=Math.floor(age);var months=Math.round(Number((age-Math.floor(age)).toFixed(2))*12);var weeks=0;var yearString='';var monthString='';if(years===1){yearString=\"\".concat(years,\" year\");}else if(years>1){yearString=\"\".concat(years,\" years\");}if(months===1){monthString=\"\".concat(months,\" month\");}else if(months>1){monthString=\"\".concat(months,\" months\");}// edge case\nif(months===0&&years===0){weeks=Math.round(Number((age-Math.floor(age)).toFixed(2))*12*4);if(weeks===0){return'1 week old';}else{return\"\".concat(weeks,\" weeks old\");}}return\"\".concat(yearString,\" \").concat(monthString,\" old\");};export var getUserFromToken=function getUserFromToken(){if(window.localStorage['jwtToken']){var token=window.localStorage['jwtToken'];var base64Url=token.split('.')[1];var base64=base64Url.replace('-','+').replace('_','/');var userJson=JSON.parse(window.atob(base64));// if token is expired delete it and return { isAuthenticated: false }\n// --> User is not logged in anymore.\nvar expirationTime=userJson.exp*1000-60000;if(Date.now()>=expirationTime){window.localStorage.removeItem('jwtToken');console.log(userJson.exp*1000,Date.now());return{isAuthenticated:false};}return{isAuthenticated:true,user:{id:userJson._id,username:userJson.username,role:userJson.role}};}return{};};export var isObjEmpty=function isObjEmpty(obj){return obj===undefined||obj===null||Object.keys(obj).length===0;};export var showPremiumBanner=function showPremiumBanner(loggedInUser){return!loggedInUser||loggedInUser.subscriptionPlan==='free'&&loggedInUser.role!=='admin';};","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/helper/helpers.js"],"names":["getAgeString","age","years","Math","floor","months","round","Number","toFixed","weeks","yearString","monthString","getUserFromToken","window","localStorage","token","base64Url","split","base64","replace","userJson","JSON","parse","atob","expirationTime","exp","Date","now","removeItem","console","log","isAuthenticated","user","id","_id","username","role","isObjEmpty","obj","undefined","Object","keys","length","showPremiumBanner","loggedInUser","subscriptionPlan"],"mappings":"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","sourcesContent":["export const getAgeString = (age) => {\n    const years = Math.floor(age);\n    const months = Math.round(Number((age - Math.floor(age)).toFixed(2)) * 12);\n    let weeks = 0;\n\n    let yearString = '';\n    let monthString = '';\n\n    if (years === 1) {\n        yearString = `${years} year`;\n    } else if (years > 1) {\n        yearString = `${years} years`;\n    }\n\n    if (months === 1) {\n        monthString = `${months} month`;\n    } else if (months > 1) {\n        monthString = `${months} months`;\n    }\n\n    // edge case\n    if (months === 0 && years === 0) {\n        weeks = Math.round(Number((age - Math.floor(age)).toFixed(2)) * 12 * 4);\n        if (weeks === 0) {\n            return '1 week old';\n        } else {\n            return `${weeks} weeks old`;\n        }\n    }\n\n    return `${yearString} ${monthString} old`;\n};\n\nexport  const getUserFromToken = () => {\n    if (window.localStorage['jwtToken']) {\n        let token = window.localStorage['jwtToken'];\n        let base64Url = token.split('.')[1];\n        let base64 = base64Url.replace('-', '+').replace('_', '/');\n        let userJson = JSON.parse(window.atob(base64));\n        // if token is expired delete it and return { isAuthenticated: false }\n        // --> User is not logged in anymore.\n        const expirationTime = (userJson.exp * 1000) - 60000\n        if (Date.now() >= expirationTime) {\n            window.localStorage.removeItem('jwtToken');\n            console.log(userJson.exp * 1000, Date.now())\n            return { isAuthenticated: false };\n        }\n        return {\n            isAuthenticated: true,\n            user: {\n                id: userJson._id,\n                username: userJson.username,\n                role: userJson.role,\n            },\n        };\n    }\n    return {};\n};\n\nexport const isObjEmpty = (obj) => obj === undefined || obj === null || Object.keys(obj).length === 0;\n\nexport const showPremiumBanner = (loggedInUser) => !loggedInUser || (loggedInUser.subscriptionPlan === 'free' && loggedInUser.role !== 'admin');\n"]},"metadata":{},"sourceType":"module"}
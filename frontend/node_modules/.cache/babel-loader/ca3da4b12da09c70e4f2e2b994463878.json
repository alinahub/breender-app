{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{makeStyles}from'@material-ui/core/styles';import{Paper,FormControl,RadioGroup,FormControlLabel,Radio,Typography,Button}from'@material-ui/core';import{PayPalScriptProvider,PayPalButtons}from'@paypal/react-paypal-js';import{connect}from'react-redux';import NotificationService from'services/NotificationService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{margin:'auto'},paper:{width:'1000px',height:'425px',padding:theme.spacing(2)},row:{paddingTop:theme.spacing(1.5),paddingBottom:theme.spacing(1),'&:last-child':{paddingBottom:theme.spacing(0)},'&:first-child':{paddingTop:theme.spacing(0)}},buttons:{display:'flex',justifyContent:'flex-end'},button:{marginLeft:theme.spacing(1)}};});/**\n * For payment info and registering a new user\n * @param {props} props\n */function PaymentInformationComponent(props){var classes=useStyles();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),disabled=_React$useState2[0],setDisabled=_React$useState2[1];var options={'client-id':'AU51gVXV29PQQgKgUCipVcv_d6ZEVCHUJH0AwBCBb3ey5faoUa-NdJ8eqWdl-aZysrDrCmf3Dy3EPsdX',currency:'EUR'};var values=props.values;var onError=function onError(err){NotificationService.notify('error','Error','There was an error in PayPal payment. Please try again.');};function onSuccess(paymentMethod){var paymentPlan=props.payments.find(function(x){return x.price===props.values.chosenPayment;});props.user.user?props.onSuccess(paymentPlan.plan,paymentMethod):props.onSuccess(values.email,values.username,values.password,values.city,values.province,values.isAdmin,values.subscriptionPlan,paymentPlan.plan,paymentMethod);}return/*#__PURE__*/_jsx(\"div\",{className:classes.root,align:\"center\",children:/*#__PURE__*/_jsxs(Paper,{className:classes.paper,component:\"form\",children:[/*#__PURE__*/_jsx(\"div\",{className:classes.row,children:/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Choose payment plan\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.row,children:/*#__PURE__*/_jsx(FormControl,{component:\"fieldset\",children:/*#__PURE__*/_jsx(RadioGroup,{\"aria-label\":\"plan\",value:props.values.chosenPayment,onChange:function onChange(e){return props.handleChange('chosenPayment',e);},id:\"payment\",children:props.payments.map(function(payment){return/*#__PURE__*/_jsx(FormControlLabel,{value:payment.price,control:/*#__PURE__*/_jsx(Radio,{style:{color:\"#D37F65\"}}),label:payment.description,className:classes.radio},payment.price);})})})}),/*#__PURE__*/_jsx(\"div\",{className:classes.row,children:/*#__PURE__*/_jsx(PayPalScriptProvider,{options:options,children:/*#__PURE__*/_jsx(PayPalButtons,{disabled:disabled,forceReRender:[props.values.chosenPayment],style:{layout:'horizontal'}//rerender paypal button every time payment plan changes: ensures that plan_id is correct\n,createOrder:function createOrder(data,actions){setDisabled(true);return actions.order.create({purchase_units:[{description:'Breender Premium Subscription',amount:{value:props.values.chosenPayment}}]});},onApprove:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data,actions){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:actions.order.capture().then(function(details){var paymentMethod={type:'PayPal',email:details.payer.email_address};onSuccess(paymentMethod);});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}(),onError:onError})})}),/*#__PURE__*/_jsx(\"div\",{className:classes.row+' '+classes.buttons,children:/*#__PURE__*/_jsx(Button,{className:classes.button,onClick:props.prevStep,disabled:disabled,variant:\"outlined\",color:\"primary\",children:\"Back\"})})]})});}export default connect()(PaymentInformationComponent);","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/components/PaymentInformation.js"],"names":["React","makeStyles","Paper","FormControl","RadioGroup","FormControlLabel","Radio","Typography","Button","PayPalScriptProvider","PayPalButtons","connect","NotificationService","useStyles","theme","root","margin","paper","width","height","padding","spacing","row","paddingTop","paddingBottom","buttons","display","justifyContent","button","marginLeft","PaymentInformationComponent","props","classes","useState","disabled","setDisabled","options","currency","values","onError","err","notify","onSuccess","paymentMethod","paymentPlan","payments","find","x","price","chosenPayment","user","plan","email","username","password","city","province","isAdmin","subscriptionPlan","e","handleChange","map","payment","color","description","radio","layout","data","actions","order","create","purchase_units","amount","value","capture","then","details","type","payer","email_address","prevStep"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper, FormControl, RadioGroup, FormControlLabel, Radio, Typography, Button } from '@material-ui/core';\nimport { PayPalScriptProvider, PayPalButtons } from '@paypal/react-paypal-js';\nimport { connect } from 'react-redux';\nimport NotificationService from 'services/NotificationService';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: 'auto',\n    },\n    paper: {\n        width: '1000px',\n        height: '425px',\n        padding: theme.spacing(2),\n    },\n    row: {\n        paddingTop: theme.spacing(1.5),\n        paddingBottom: theme.spacing(1),\n        '&:last-child': {\n            paddingBottom: theme.spacing(0),\n        },\n        '&:first-child': {\n            paddingTop: theme.spacing(0),\n        },\n    },\n    buttons: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n    },\n    button: {\n        marginLeft: theme.spacing(1),\n    }\n}));\n\n/**\n * For payment info and registering a new user\n * @param {props} props\n */\nfunction PaymentInformationComponent(props) {\n    const classes = useStyles();\n    const [disabled, setDisabled] = React.useState(false);\n\n    const options = {\n        'client-id': 'AU51gVXV29PQQgKgUCipVcv_d6ZEVCHUJH0AwBCBb3ey5faoUa-NdJ8eqWdl-aZysrDrCmf3Dy3EPsdX',\n        currency: 'EUR',\n    };\n\n    const values = props.values;\n\n    const onError = (err) => {\n        NotificationService.notify('error', 'Error', 'There was an error in PayPal payment. Please try again.');\n    };\n\n    function onSuccess(paymentMethod) {\n        const paymentPlan = props.payments.find((x) => x.price === props.values.chosenPayment);\n        props.user.user\n            ? props.onSuccess(paymentPlan.plan, paymentMethod)\n            : props.onSuccess(values.email, values.username, values.password, values.city, values.province, values.isAdmin, values.subscriptionPlan, paymentPlan.plan, paymentMethod);\n    }\n\n    return (\n        <div className={classes.root} align=\"center\">\n            <Paper className={classes.paper} component=\"form\">\n                <div className={classes.row}>\n                    <Typography variant=\"h4\">Choose payment plan</Typography>\n                </div>\n                <div className={classes.row}>\n                    <FormControl component=\"fieldset\">\n                        <RadioGroup aria-label=\"plan\" value={props.values.chosenPayment} onChange={(e) => props.handleChange('chosenPayment', e)} id=\"payment\">\n                            {props.payments.map((payment) => (\n                                <FormControlLabel value={payment.price} control={<Radio style={{color: \"#D37F65\"}}/>} label={payment.description} key={payment.price} className={classes.radio}/>\n                            ))}\n                        </RadioGroup>\n                    </FormControl>\n                </div>\n                <div className={classes.row}>\n                    <PayPalScriptProvider options={options}>\n                        <PayPalButtons\n                            disabled={disabled}\n                            forceReRender={[props.values.chosenPayment]}\n                            style={{ layout: 'horizontal' }} //rerender paypal button every time payment plan changes: ensures that plan_id is correct\n                            createOrder={(data, actions) => {\n                                setDisabled(true);\n                                return actions.order.create({\n                                    purchase_units: [\n                                        {\n                                            description: 'Breender Premium Subscription',\n                                            amount: {\n                                                value: props.values.chosenPayment,\n                                            },\n                                        },\n                                    ],\n                                });\n                            }}\n                            onApprove={async (data, actions) => {\n                                actions.order.capture().then((details) => {\n                                    const paymentMethod = {\n                                        type: 'PayPal',\n                                        email: details.payer.email_address,\n                                    };\n                                    onSuccess(paymentMethod);\n                                });\n                            }}\n                            onError={onError}\n                        />\n                    </PayPalScriptProvider>\n                </div>\n                <div className={classes.row + ' ' + classes.buttons}>\n                    <Button className={classes.button} onClick={props.prevStep} disabled={disabled} variant=\"outlined\" color=\"primary\">\n                        Back\n                    </Button>\n                </div>\n            </Paper>\n        </div>\n    );\n}\n\nexport default connect()(PaymentInformationComponent);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from'react';import{connect,useSelector}from\"react-redux\";import UserProfile from\"../components/user-profile/UserProfile\";import{getUser,getSelectedUserPets,getReviewsOnSelectedUser}from'redux/actions';import{useLocation}from'react-router-dom';import Loading from'../components/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";function SelectedUserProfileView(props){var location=useLocation();var userId=location.pathname.split('/user/')[1];//get selectedUser, pets and reviews from Redux store\nvar selectedUser=useSelector(function(state){return state.user.selectedUser;});var pets=useSelector(function(state){return state.user.selectedUserPets;});var reviews=useSelector(function(state){return state.user.reviewsOnSelectedUser;});useEffect(function(){var loading=true;var loadUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(loading){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return props.dispatch(getUser(id));case 4:case\"end\":return _context.stop();}}},_callee);}));return function loadUser(_x){return _ref.apply(this,arguments);};}();// load user when the page is loaded\nloadUser(userId);return function(){loading=false;};},[props,userId]);useEffect(function(){var loading=true;var loadUserPets=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(loading){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.next=4;return props.dispatch(getSelectedUserPets(userId));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function loadUserPets(){return _ref2.apply(this,arguments);};}();// load pets of a user when the page is loaded\nloadUserPets();return function(){loading=false;};},[props,userId]);useEffect(function(){var loading=true;var loadReviews=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(loading){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:_context3.next=4;return props.dispatch(getReviewsOnSelectedUser(userId));case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function loadReviews(){return _ref3.apply(this,arguments);};}();// load reviews on a user when the page is loaded\nloadReviews();return function(){loading=false;};},[props,userId]);return!selectedUser||selectedUser._id!==userId?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(UserProfile,{user:selectedUser,pets:pets,profileOfLoggedInUser:false,reviews:reviews});}export default connect()(SelectedUserProfileView);","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/views/SelectedUserProfileView.js"],"names":["React","useEffect","connect","useSelector","UserProfile","getUser","getSelectedUserPets","getReviewsOnSelectedUser","useLocation","Loading","SelectedUserProfileView","props","location","userId","pathname","split","selectedUser","state","user","pets","selectedUserPets","reviews","reviewsOnSelectedUser","loading","loadUser","id","dispatch","loadUserPets","loadReviews","_id"],"mappings":"uUAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,CAAkBC,WAAlB,KAAqC,aAArC,CACA,MAAOC,CAAAA,WAAP,KAAwB,wCAAxB,CACA,OAASC,OAAT,CAAkBC,mBAAlB,CAAuCC,wBAAvC,KAAuE,eAAvE,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,C,2CAEA,QAASC,CAAAA,uBAAT,CAAiCC,KAAjC,CAAwC,CACpC,GAAMC,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CAEA,GAAMK,CAAAA,MAAM,CAAGD,QAAQ,CAACE,QAAT,CAAkBC,KAAlB,CAAwB,QAAxB,EAAkC,CAAlC,CAAf,CACA;AACA,GAAIC,CAAAA,YAAY,CAAGb,WAAW,CAAC,SAACc,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAN,CAAWF,YAAtB,EAAD,CAA9B,CACA,GAAIG,CAAAA,IAAI,CAAGhB,WAAW,CAAC,SAACc,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAN,CAAWE,gBAAtB,EAAD,CAAtB,CACA,GAAIC,CAAAA,OAAO,CAAGlB,WAAW,CAAC,SAACc,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAN,CAAWI,qBAAtB,EAAD,CAAzB,CAEArB,SAAS,CAAC,UAAM,CACZ,GAAIsB,CAAAA,OAAO,CAAG,IAAd,CAEA,GAAMC,CAAAA,QAAQ,0FAAG,iBAAOC,EAAP,qHAERF,OAFQ,uFAGPZ,CAAAA,KAAK,CAACe,QAAN,CAAerB,OAAO,CAACoB,EAAD,CAAtB,CAHO,uDAAH,kBAARD,CAAAA,QAAQ,4CAAd,CAKA;AACAA,QAAQ,CAACX,MAAD,CAAR,CAEA,MAAO,WAAM,CACTU,OAAO,CAAG,KAAV,CACH,CAFD,CAGH,CAdQ,CAcN,CAACZ,KAAD,CAAQE,MAAR,CAdM,CAAT,CAgBAZ,SAAS,CAAC,UAAM,CACZ,GAAIsB,CAAAA,OAAO,CAAG,IAAd,CAEA,GAAMI,CAAAA,YAAY,2FAAG,2IAEZJ,OAFY,0FAGXZ,CAAAA,KAAK,CAACe,QAAN,CAAepB,mBAAmB,CAACO,MAAD,CAAlC,CAHW,yDAAH,kBAAZc,CAAAA,YAAY,2CAAlB,CAKA;AACAA,YAAY,GAEZ,MAAO,WAAM,CACTJ,OAAO,CAAG,KAAV,CACH,CAFD,CAGH,CAdQ,CAcN,CAACZ,KAAD,CAAQE,MAAR,CAdM,CAAT,CAgBAZ,SAAS,CAAC,UAAM,CACZ,GAAIsB,CAAAA,OAAO,CAAG,IAAd,CAEA,GAAMK,CAAAA,WAAW,2FAAG,2IAEXL,OAFW,0FAGVZ,CAAAA,KAAK,CAACe,QAAN,CAAenB,wBAAwB,CAACM,MAAD,CAAvC,CAHU,yDAAH,kBAAXe,CAAAA,WAAW,2CAAjB,CAMA;AACAA,WAAW,GAEX,MAAO,WAAM,CACTL,OAAO,CAAG,KAAV,CACH,CAFD,CAGH,CAfQ,CAeN,CAACZ,KAAD,CAAQE,MAAR,CAfM,CAAT,CAiBA,MAAO,CAACG,YAAD,EAAiBA,YAAY,CAACa,GAAb,GAAqBhB,MAAtC,cACH,KAAC,OAAD,IADG,cAEH,KAAC,WAAD,EAAa,IAAI,CAAEG,YAAnB,CAAiC,IAAI,CAAEG,IAAvC,CAA6C,qBAAqB,CAAE,KAApE,CAA2E,OAAO,CAAEE,OAApF,EAFJ,CAGH,CAED,cAAenB,CAAAA,OAAO,GAAGQ,uBAAH,CAAtB","sourcesContent":["import React, { useEffect } from 'react';\nimport { connect, useSelector } from \"react-redux\";\nimport UserProfile from \"../components/user-profile/UserProfile\";\nimport { getUser, getSelectedUserPets, getReviewsOnSelectedUser } from 'redux/actions';\nimport { useLocation } from 'react-router-dom';\nimport Loading from '../components/Loading';\n\nfunction SelectedUserProfileView(props) {\n    const location = useLocation();\n\n    const userId = location.pathname.split('/user/')[1];\n    //get selectedUser, pets and reviews from Redux store\n    var selectedUser = useSelector((state) => state.user.selectedUser);\n    var pets = useSelector((state) => state.user.selectedUserPets);\n    var reviews = useSelector((state) => state.user.reviewsOnSelectedUser);\n\n    useEffect(() => {\n        let loading = true;\n\n        const loadUser = async (id) => {\n            // trigger the redux action getUser\n            if (!loading) return;\n            await props.dispatch(getUser(id));\n        };\n        // load user when the page is loaded\n        loadUser(userId);\n\n        return () => {\n            loading = false;\n        };\n    }, [props, userId]);\n\n    useEffect(() => {\n        let loading = true;\n\n        const loadUserPets = async () => {\n            // trigger the redux action getUserPets\n            if (!loading) return;\n            await props.dispatch(getSelectedUserPets(userId));\n        };\n        // load pets of a user when the page is loaded\n        loadUserPets();\n    \n        return () => {\n            loading = false;\n        };\n    }, [props, userId]);\n\n    useEffect(() => {\n        let loading = true;\n\n        const loadReviews = async () => {\n            // trigger the redux action getReviewsOnUser\n            if (!loading) return;\n            await props.dispatch(getReviewsOnSelectedUser(userId));\n        };\n\n        // load reviews on a user when the page is loaded\n        loadReviews();\n    \n        return () => {\n            loading = false;\n        };\n    }, [props, userId]);\n\n    return !selectedUser || selectedUser._id !== userId ? (\n        <Loading />\n    ) : <UserProfile user={selectedUser} pets={pets} profileOfLoggedInUser={false} reviews={reviews} />\n}\n\nexport default connect()(SelectedUserProfileView);"]},"metadata":{},"sourceType":"module"}
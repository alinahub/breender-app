{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/alinaturbina/Uni Projects/seba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{makeStyles}from'@material-ui/core/styles';import List from'@material-ui/core/List';import{Paper,Divider,Typography}from'@material-ui/core';import PetInformationPaper from'../PetInformationPaper';import Grid from'@material-ui/core/Grid';import Button from'@material-ui/core/Button';import UserInformation from'./UserInformation';import UserForm from'./UserForm';import{NotificationService}from'services';import{useHistory}from'react-router-dom';import{useDispatch}from'react-redux';import{updateUser}from'redux/actions';import ReviewComponent from'./ReviewComponent';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{flexGrow:1,padding:theme.spacing(1)},paper:{padding:theme.spacing(4),paddingTop:theme.spacing(6),margin:'auto',marginTop:theme.spacing(6),maxWidth:'85%',borderRadius:25},paperSmall:{padding:theme.spacing(3),margin:'auto',maxWidth:'75%'},flexContainer:{display:'flex',flexDirection:'row',padding:0},typographyNotifications:{padding:theme.spacing(2),margin:'auto'},typography:{margin:theme.spacing(2),marginTop:theme.spacing(6)},divider:{margin:theme.spacing(3)},button:{margin:theme.spacing(1)},black:{color:'#fff',backgroundColor:'#787878'},listItem:{paddingLeft:'15%',paddingRight:'15%'}};});export default function UserProfile(props){var classes=useStyles();var history=useHistory();var dispatch=useDispatch();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),editingMode=_React$useState2[0],setEditingMode=_React$useState2[1];var _React$useState3=React.useState(props.user.username),_React$useState4=_slicedToArray(_React$useState3,2),username=_React$useState4[0],setUsername=_React$useState4[1];var _React$useState5=React.useState(props.user.email),_React$useState6=_slicedToArray(_React$useState5,2),email=_React$useState6[0],setEmail=_React$useState6[1];var _React$useState7=React.useState(props.user.province),_React$useState8=_slicedToArray(_React$useState7,2),province=_React$useState8[0],setProvince=_React$useState8[1];var _React$useState9=React.useState(props.user.city),_React$useState10=_slicedToArray(_React$useState9,2),city=_React$useState10[0],setCity=_React$useState10[1];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),password=_React$useState12[0],setPassword=_React$useState12[1];var _React$useState13=React.useState(''),_React$useState14=_slicedToArray(_React$useState13,2),password2=_React$useState14[0],setPassword2=_React$useState14[1];var _React$useState15=React.useState(props.user.paymentMethod),_React$useState16=_slicedToArray(_React$useState15,2),paymentMethod=_React$useState16[0],setPaymentMethod=_React$useState16[1];var _React$useState17=React.useState(false),_React$useState18=_slicedToArray(_React$useState17,2),disableSave=_React$useState18[0],setDisableSave=_React$useState18[1];var handleModeChange=function handleModeChange(event){if(editingMode){updateUserOnSave();setEditingMode(false);}else{setEditingMode(true);}};var updateUserOnSave=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userWithChanges,onSuccess,onError;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userWithChanges={_id:props.user._id,username:username,email:email,province:province,city:city,paymentMethod:paymentMethod,subscriptionPlan:props.user.subscriptionPlan};if(password!==''&&password2!==''&&password===password2){userWithChanges.password=password;}onSuccess=function onSuccess(){NotificationService.notify('success','Success','Your profile was successfully updated!');setDisableSave(false);history.push('/user');};onError=function onError(){NotificationService.notify('error','Error','There was a problem updating your profile.');};dispatch(updateUser(userWithChanges,onSuccess,onError));case 5:case\"end\":return _context.stop();}}},_callee);}));return function updateUserOnSave(){return _ref.apply(this,arguments);};}();var handleAddPet=function handleAddPet(event){history.push('/add-pet');};return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsxs(Paper,{className:classes.paper,children:[/*#__PURE__*/_jsxs(Grid,{container:true,justify:\"space-between\",spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"center\",style:{fontWeight:600},children:props.profileOfLoggedInUser?\"Account information\":props.user.username.toUpperCase()})}),/*#__PURE__*/_jsx(Grid,{item:true,children:props.profileOfLoggedInUser?/*#__PURE__*/_jsx(Button,{className:classes.button,variant:\"contained\",color:\"primary\",onClick:handleModeChange,disabled:disableSave,children:editingMode?\"Save\":\"Edit\"}):/*#__PURE__*/_jsx(\"div\",{})})]}),editingMode?/*#__PURE__*/_jsx(UserForm,{usernameProp:{username:username,setUsername:setUsername},emailProp:{email:email,setEmail:setEmail},provinceProp:{province:province,setProvince:setProvince},cityProp:{city:city,setCity:setCity},passwordProp:{password:password,setPassword:setPassword},password2Prop:{password2:password2,setPassword2:setPassword2},paymentMethodProp:{paymentMethod:paymentMethod,setPaymentMethod:setPaymentMethod},disableSaveProp:{disableSave:disableSave,setDisableSave:setDisableSave},subscriptionPlan:props.user.subscriptionPlan}):/*#__PURE__*/_jsx(UserInformation,{user:props.user,profileOfLoggedInUser:props.profileOfLoggedInUser}),/*#__PURE__*/_jsx(Divider,{variant:\"middle\",className:classes.divider}),/*#__PURE__*/_jsx(Typography,{className:classes.typography,variant:\"h6\",align:\"center\",style:{fontWeight:600},children:props.profileOfLoggedInUser?\"My pets\":\"Pets\"}),/*#__PURE__*/_jsxs(List,{children:[props.pets&&props.pets.length>0?props.pets.map(function(pet){return/*#__PURE__*/_jsx(PetInformationPaper,{pet:pet,user:props.user,editingMode:editingMode,fromSearch:false},pet._id);}):!editingMode?/*#__PURE__*/_jsx(Typography,{className:classes.typographyNotifications,align:\"center\",children:\"No pets added yet\"}):/*#__PURE__*/_jsx(\"div\",{}),props.profileOfLoggedInUser?props.user.isVerified?/*#__PURE__*/_jsx(\"div\",{style:{marginTop:20},children:/*#__PURE__*/_jsx(Button,{style:{margin:'0 auto',display:\"flex\"},variant:\"contained\",color:\"secondary\",onClick:handleAddPet,children:\"Add pet\"})}):/*#__PURE__*/_jsx(Typography,{className:classes.typographyNotifications,align:\"center\",children:\"Please verify your email to add a pet\"}):/*#__PURE__*/_jsx(\"div\",{})]}),editingMode?/*#__PURE__*/_jsx(\"div\",{}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Divider,{variant:\"middle\",className:classes.divider}),/*#__PURE__*/_jsx(Typography,{className:classes.typography,variant:\"h6\",align:\"center\",style:{fontWeight:600},children:props.profileOfLoggedInUser?\"Reviews from other users\":\"Reviews\"}),/*#__PURE__*/_jsx(List,{children:props.reviews&&props.reviews.length>0?props.reviews.map(function(review){return/*#__PURE__*/_jsx(ReviewComponent,{review:review});}):/*#__PURE__*/_jsx(Typography,{className:classes.typographyNotifications,align:\"center\",children:\"No reviews added yet\"})})]})]})});}","map":{"version":3,"sources":["/Users/alinaturbina/Uni Projects/seba/frontend/src/components/user-profile/UserProfile.js"],"names":["React","makeStyles","List","Paper","Divider","Typography","PetInformationPaper","Grid","Button","UserInformation","UserForm","NotificationService","useHistory","useDispatch","updateUser","ReviewComponent","useStyles","theme","root","flexGrow","padding","spacing","paper","paddingTop","margin","marginTop","maxWidth","borderRadius","paperSmall","flexContainer","display","flexDirection","typographyNotifications","typography","divider","button","black","color","backgroundColor","listItem","paddingLeft","paddingRight","UserProfile","props","classes","history","dispatch","useState","editingMode","setEditingMode","user","username","setUsername","email","setEmail","province","setProvince","city","setCity","password","setPassword","password2","setPassword2","paymentMethod","setPaymentMethod","disableSave","setDisableSave","handleModeChange","event","updateUserOnSave","userWithChanges","_id","subscriptionPlan","onSuccess","notify","push","onError","handleAddPet","fontWeight","profileOfLoggedInUser","toUpperCase","pets","length","map","pet","isVerified","reviews","review"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport { Paper, Divider, Typography } from '@material-ui/core';\nimport PetInformationPaper from '../PetInformationPaper';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport UserInformation from './UserInformation';\nimport UserForm from './UserForm';\nimport { NotificationService } from 'services';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { updateUser } from 'redux/actions';\nimport ReviewComponent from './ReviewComponent';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n        padding: theme.spacing(1),\n    },\n    paper: {\n        padding: theme.spacing(4),\n        paddingTop: theme.spacing(6),\n        margin: 'auto',\n        marginTop: theme.spacing(6),\n        maxWidth: '85%',\n        borderRadius: 25,\n    },\n    paperSmall: {\n        padding: theme.spacing(3),\n        margin: 'auto',\n        maxWidth: '75%',\n    },\n    flexContainer: {\n        display: 'flex',\n        flexDirection: 'row',\n        padding: 0,\n    },\n    typographyNotifications: {\n        padding: theme.spacing(2),\n        margin: 'auto',\n    },\n    typography: {\n        margin: theme.spacing(2),\n        marginTop: theme.spacing(6),\n    },\n    divider: {\n        margin: theme.spacing(3),\n    },\n    button: {\n        margin: theme.spacing(1),\n    },\n    black: {\n        color: '#fff',\n        backgroundColor: '#787878',\n    },\n    listItem: {\n        paddingLeft: '15%',\n        paddingRight: '15%',\n    },\n}));\n\nexport default function UserProfile(props) {\n    const classes = useStyles();\n    const history = useHistory();\n    const dispatch = useDispatch();\n\n    const [editingMode, setEditingMode] = React.useState(false);\n    const [username, setUsername] = React.useState(props.user.username);\n    const [email, setEmail] = React.useState(props.user.email);\n    const [province, setProvince] = React.useState(props.user.province);\n    const [city, setCity] = React.useState(props.user.city);\n    const [password, setPassword] = React.useState('');\n    const [password2, setPassword2] = React.useState('');\n    const [paymentMethod, setPaymentMethod] = React.useState(props.user.paymentMethod);\n    const [disableSave, setDisableSave] = React.useState(false);\n\n    const handleModeChange = (event) => {\n        if (editingMode) {\n            updateUserOnSave();\n            setEditingMode(false);\n        } else {\n            setEditingMode(true);\n        }\n    };\n\n    const updateUserOnSave = async () => {\n\n        let userWithChanges = {\n            _id: props.user._id,\n            username: username,\n            email: email,\n            province: province,\n            city: city,\n            paymentMethod: paymentMethod,\n            subscriptionPlan: props.user.subscriptionPlan\n        };\n\n\n        if (password !== '' && password2 !== '' && password === password2) {\n            userWithChanges.password = password\n        }\n\n        const onSuccess = () => {\n            NotificationService.notify('success', 'Success', 'Your profile was successfully updated!');\n            setDisableSave(false);\n            history.push('/user');\n        };\n\n        const onError = () => {\n            NotificationService.notify('error', 'Error', 'There was a problem updating your profile.');\n        };\n\n        dispatch(updateUser(userWithChanges, onSuccess, onError));\n    };\n\n    const handleAddPet = (event) => {\n        history.push('/add-pet');\n    };\n\n\n    return (<div className={classes.root}>\n        <Paper className={classes.paper} >\n            <Grid container justify=\"space-between\" spacing={2}>\n                <Grid item />\n                <Grid item >\n                    <Typography variant=\"h6\" align=\"center\" style={{ fontWeight: 600 }}>\n                        {props.profileOfLoggedInUser ? \"Account information\" : props.user.username.toUpperCase()}\n                    </Typography>\n                </Grid>\n                <Grid item>\n                    {props.profileOfLoggedInUser ? <Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={handleModeChange} disabled={disableSave}>\n                        {editingMode ? \"Save\" : \"Edit\"}\n                    </Button> : <div />}\n\n                </Grid>\n            </Grid>\n            {editingMode ?\n                <UserForm\n                    usernameProp={{ username, setUsername }}\n                    emailProp={{ email, setEmail }}\n                    provinceProp={{ province, setProvince }}\n                    cityProp={{ city, setCity }}\n                    passwordProp={{ password, setPassword }}\n                    password2Prop={{ password2, setPassword2 }}\n                    paymentMethodProp={{ paymentMethod, setPaymentMethod }}\n                    disableSaveProp={{ disableSave, setDisableSave }}\n                    subscriptionPlan={props.user.subscriptionPlan} />\n                : <UserInformation user={props.user} profileOfLoggedInUser={props.profileOfLoggedInUser} />}\n            <Divider variant=\"middle\" className={classes.divider} />\n            <Typography className={classes.typography} variant=\"h6\" align=\"center\" style={{ fontWeight: 600 }}>\n                {props.profileOfLoggedInUser ? \"My pets\" : \"Pets\"}\n            </Typography>\n            <List>\n                {props.pets && props.pets.length > 0 ?\n                    props.pets.map((pet) => <PetInformationPaper pet={pet} user={props.user} key={pet._id} editingMode={editingMode} fromSearch={false} />)\n                    : (!editingMode ?\n                        <Typography className={classes.typographyNotifications} align=\"center\">\n                            No pets added yet\n                        </Typography> : <div />)}\n                {props.profileOfLoggedInUser ? (props.user.isVerified ?\n                    <div style={{ marginTop: 20 }}>\n                        <Button style={{ margin: '0 auto', display: \"flex\" }} variant=\"contained\" color=\"secondary\" onClick={handleAddPet}>\n                            Add pet\n                        </Button>\n                    </div>\n                    : <Typography className={classes.typographyNotifications} align=\"center\">\n                        Please verify your email to add a pet\n                    </Typography>) : <div />}\n            </List>\n            {editingMode ? <div />\n                :\n                <div>\n                    <Divider variant=\"middle\" className={classes.divider} />\n                    <Typography className={classes.typography} variant=\"h6\" align=\"center\" style={{ fontWeight: 600 }}>\n                        {props.profileOfLoggedInUser ? \"Reviews from other users\" : \"Reviews\"}\n                    </Typography>\n                    <List>\n                        {props.reviews && props.reviews.length > 0 ?\n                            props.reviews.map((review) => <ReviewComponent review={review} />)\n                            : <Typography className={classes.typographyNotifications} align=\"center\">\n                                No reviews added yet\n                            </Typography>}\n                    </List>\n                </div>}\n        </Paper>\n    </div >)\n}"]},"metadata":{},"sourceType":"module"}